<!DOCTYPE html>
<html><head><title>Differentials, Dual Numbers and Automatic Differentiation</title><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="This namespace develops an implementation of a type called [[Differential]]. A [[Differential]] is a generalization of a type called a &quot;dual number&quot;." property="og:description"><meta content="Differentials, Dual Numbers and Automatic Differentiation" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><script src="https://cdn.tailwindcss.com?plugins=typography" type="text/javascript"></script><script>tailwind.config = {
  darkMode: "class",
  content: ["./tw/viewer.js", "./tw/**/*.edn"],
  safelist: ['dark'],
  theme: {
    extend: {},
    fontFamily: {
      sans: ["Fira Sans", "-apple-system", "BlinkMacSystemFont", "sans-serif"],
      serif: ["PT Serif", "serif"],
      mono: ["Fira Mono", "monospace"]
    }
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
</script><style type="text/tailwindcss">@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-size: 18px;
  }
  @media (max-width: 600px) {
    html {
      font-size: 16px;
    }
  }
  .font-condensed { font-family: "Fira Sans Condensed", sans-serif; }
  .font-inter     { font-family: "Inter", sans-serif; }
  body {
    @apply font-serif antialiased text-gray-900 sm:overscroll-y-none;
  }
  code, .code {
    @apply font-mono text-sm text-gray-900 bg-slate-50 px-0.5 py-px rounded dark:bg-gray-800;
  }
  code::before, code::after { @apply content-none !important; }
  h1, h3, h4, h5, h6 {
    @apply font-condensed font-bold mt-8 first:mt-0;
  }
  h2 {
    /*We cannot collapse margins due to nesting but we want to*/
    /*keep the h2’s large margin visible*/
    @apply font-condensed font-bold mt-8 first:mt-2;
  }
  h1 { @apply text-4xl; }
  h2 { @apply text-3xl; }
  h3 { @apply text-2xl; }

  @media print {
      h1 { @apply text-2xl !important; }
      h2 { @apply text-xl !important; }
      h3 { @apply text-lg !important; }
  }

  button { @apply focus:outline-none; }
  strong { @apply font-bold; }
  em     { @apply italic; }
  pre    { @apply m-0 font-mono; }
}

/* Compatibility */
/* --------------------------------------------------------------- */
/* TODO: Verify which colors are in use and replace with Tailwind
   colors accordingly. Move Nj-specific styles out of here. */

:root {
  --teal-color: #31afd0;
  --dark-teal-color: #095960;
  --near-black-color: #2e2e2c;
  --red-color: #d64242;
  --dark-blue-color: #1f2937;
  --dark-blue-60-color: rgba(28, 42, 56, 0.6);
  --gray-panel-color: rgba(239, 241, 245, 1.000);
  --brand-color: var(--dark-blue-color);
  --link-color: #5046e4;
  --command-bar-selected-color: var(--teal-color);
}

.serif      { @apply font-serif; }
.sans-serif { @apply font-sans; }
.monospace  { @apply font-mono; }
.inter      { @apply font-inter; }

.border-color-teal { border-color: var(--dark-teal-color); }
.teal { color: var(--teal-color); }
.bg-dark-blue { background: var(--dark-blue-color); }
.bg-dark-blue-60 { background: rgba(28, 42, 56, 0.6); }
.bg-gray-panel { background: var(--gray-panel-color); }
.text-dark-blue  { color: var(--dark-blue-color); }
.text-dark-blue-60 { color: var(--dark-blue-60-color); }
.border-dark-blue-30 { border-color: rgba(28, 42, 56, 0.6); }
.text-brand { color: var(--dark-blue-color); }
.bg-brand { background: var(--dark-blue-color); }
.text-selected { color: white; }
.red { color: var(--red-color); }

/* Disclose Button */
/* --------------------------------------------------------------- */

.disclose {
  @apply content-none border-solid cursor-pointer inline-block relative mr-[3px] top-[-2px] transition-all;
  border-color: var(--near-black-color) transparent;
  border-width: 6px 4px 0;
}
.disclose:hover {
  border-color: var(--near-black-color) transparent;
}
.dark .disclose,
.dark .disclose:hover {
  border-color: white transparent;
}
.disclose.collapsed {
  @apply rotate-[-90deg];
}

/* Layout */
/* --------------------------------------------------------------- */

.page {
  @apply max-w-5xl mx-auto px-12 box-border flex-shrink-0;
}
.max-w-prose { @apply max-w-[46rem] !important; }
.max-w-wide  { @apply max-w-3xl !important; }

/* List Styles */
/* --------------------------------------------------------------- */

.task-list-item + .task-list-item,
.markdown-viewer ul ul {
  @apply mt-1 mb-0;
}

/* compact TOC */
.markdown-viewer .toc ul {
  list-style: none;
  @apply my-1;
}

/* Code Viewer */
/* --------------------------------------------------------------- */

.code-viewer {
  @apply font-mono bg-slate-100 rounded-sm text-sm overflow-x-auto dark:bg-gray-800;
}
.code-listing  {
    @apply -ml-8 -mr-8 relative !important;
}
.code-viewer .cm-content {
  @apply py-4 px-8;
}
@media (min-width: 960px){
    .notebook-viewer .code-viewer .cm-content {
        @apply py-4 pl-12;
    }
    .notebook-viewer .code-listing {
        width: 48rem !important;
        @apply -ml-12 mr-0 !important;
    }
}
/* Don’t show focus outline when double-clicking cell in Safari */
.cm-scroller { @apply focus:outline-none; }

/* Syntax Highlighting */
/* --------------------------------------------------------------- */

.inspected-value { @apply text-xs font-mono leading-[1.25rem]; }
.cmt-strong, .cmt-heading { @apply font-bold; }
.cmt-italic, .cmt-emphasis { @apply italic; }
.cmt-strikethrough { @apply line-through; }
.cmt-link { @apply underline; }
.untyped-value { @apply whitespace-nowrap; }

.cm-editor, .cmt-default, .result-viewer {
  @apply text-slate-800 dark:text-slate-300;
}
.cmt-keyword {
  @apply text-purple-800 dark:text-pink-400;
}
.cmt-atom, .cmt-bool, .cmt-url, .cmt-contentSeparator, .cmt-labelName {
  @apply text-blue-900 dark:text-blue-300;
}
.cmt-inserted, .cmt-literal {
  @apply text-emerald-700 dark:text-emerald-200;
}
.cmt-string, .cmt-deleted {
  @apply text-rose-700 dark:text-sky-300;
}
.cmt-italic.cmt-string {
  @apply dark:text-sky-200;
}
.cmt-regexp, .cmt-escape {
  @apply text-orange-500 dark:text-orange-300;
}
.cmt-variableName {
  @apply text-blue-800 dark:text-sky-300;
}
.cmt-typeName, .cmt-namespace {
  @apply text-emerald-600 dark:text-emerald-300;
}
.cmt-className {
  @apply text-teal-600 dark:text-teal-200;
}
.cmt-macroName {
  @apply text-teal-700 dark:text-teal-200;
}
.cmt-propertyName {
  @apply text-blue-700 dark:text-blue-200;
}
.cmt-comment {
  @apply text-slate-500 dark:text-slate-400;
}
.cmt-meta {
  @apply text-slate-600 dark:text-slate-400;
}
.cmt-invalid {
  @apply text-red-500 dark:text-red-300;
}

.result-data {
  @apply font-mono text-sm overflow-x-auto whitespace-nowrap leading-normal;
}
.result-data::-webkit-scrollbar, .path-nav::-webkit-scrollbar {
  @apply h-0;
}
.result-data-collapsed {
  @apply whitespace-nowrap;
}
.result-data-field {
  @apply ml-4 whitespace-nowrap;
}
.result-data-field-link{
  @apply ml-4 whitespace-nowrap cursor-pointer;
}
.result-data-field-link:hover {
  @apply text-black bg-black/5;
}
.result-text-empty {
  color: rgba(0,0,0,.3);
}
.browsify-button:hover {
  box-shadow: -2px 0 0 2px #edf2f7;
}

/* Prose */
/* --------------------------------------------------------------- */

.notebook-viewer,
.markdown-viewer {
  @apply prose
    dark:prose-invert
    prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
    dark:prose-a:text-blue-300
    prose-p:mt-4 prose-p:leading-snug
    prose-ol:mt-4 prose-ol:mb-6 prose-ol:leading-snug
    prose-ul:mt-4 prose-ul:mb-6 prose-ul:leading-snug
    prose-blockquote:mt-4 prose-blockquote:leading-snug
    prose-hr:mt-6 prose-hr:border-t-2 prose-hr:border-solid prose-hr:border-slate-200
    prose-figure:mt-4
    prose-figcaption:mt-2 prose-figcaption:text-xs
    prose-headings:mb-4
    prose-table:mt-0
    prose-th:mb-0
    prose-img:my-0
    prose-code:font-medium prose-code:bg-slate-100
    max-w-none;
}
.markdown-viewer blockquote p:first-of-type:before,
.markdown-viewer blockquote p:last-of-type:after {
  @apply content-none;
}
.markdown-node-viewer.result-viewer.fragment-item {
    @apply mb-0 !important;
}

/* Images */
/* --------------------------------------------------------------- */


/* Todo Lists */
/* --------------------------------------------------------------- */

.contains-task-list {
  @apply pl-6 list-none;
}
.contains-task-list input[type="checkbox"] {
  @apply appearance-none h-4 w-4 rounded border border-slate-200 relative mr-[0.3rem] ml-[-1.5rem] top-[0.15rem];
}
.contains-task-list input[type="checkbox"]:checked {
  @apply border-indigo-600 bg-indigo-600 bg-no-repeat bg-contain;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

/* Markdown TOC */
/* --------------------------------------------------------------- */

.markdown-viewer .toc      { @apply mt-4; }
.markdown-viewer h1 + .toc { @apply mt-8; }

.markdown-viewer .toc h1,
.markdown-viewer .toc h2,
.markdown-viewer .toc h3,
.markdown-viewer .toc h4,
.markdown-viewer .toc h5,
.markdown-viewer .toc h6 {
  @apply text-base text-indigo-600 font-sans my-0;
}
.markdown-viewer .toc a {
  @apply text-indigo-600 font-normal no-underline hover:underline;
}
.markdown-viewer .toc li    { @apply m-0; }
.markdown-viewer .toc ul ul { @apply pl-4; }

/* Notebook Spacing */
/* --------------------------------------------------------------- */

.notebook-viewer { @apply py-16; }
#clerk-static-app .notebook-viewer { @apply pt-[0.8rem] pb-16; }
.markdown-viewer *:first-child:not(.code-viewer):not(li):not(h2):not(.sidenote) { @apply mt-0; }
/*.viewer + .viewer { @apply mt-6; }*/
.viewer + .result-viewer { @apply mt-0; }
.code-viewer + .result-viewer { @apply mt-3; }
.markdown-viewer + .markdown-viewer { @apply mt-0; }

/* Sidenotes */
/* --------------------------------------------------------------- */

.sidenote-ref {
  @apply top-[-0.5em] w-auto h-auto inline border-0 bg-transparent m-0 pointer-events-none;
}
.sidenote {
  @apply block font-sans text-xs mt-4 bg-slate-100 dark:bg-slate-800 p-4;
  font-style: normal;
  font-weight: normal;
}
.sidenote-container {
  @apply mb-4;
}
@media (min-width: 860px) {
  .sidenote sup { @apply inline; }
  .sidenote-column {
    @apply w-[165px] absolute right-0 top-0 -mr-[205px];
  }
  .sidenote {
    @apply bg-transparent dark:bg-transparent p-0;
  }
  .sidenote:first-child {
    @apply mt-1;
  }
  .sidenotes-layout .markdown-viewer {
    @apply pr-[241px];
  }
  .sidenote-container {
    @apply relative mb-0;
  }
  .sidenotes-layout h1 {
    @apply w-[756px] !important;
  }
}
.code-viewer + .viewer:not(.code-viewer):not(.code-viewer-folded),
.code-viewer-folded + .viewer:not(.code-viewer):not(.code-viewer-folded),
.result-viewer:not(.markdown-node-viewer) + .result-viewer {
  @apply mt-2;
}
.code-viewer + .code-viewer-folded {
  @apply mt-4;
}
.result-viewer {
  @apply leading-tight mb-6;
}
.code-viewer.fragment-item.result-viewer {
  @apply mb-0 !important;
}
.result-viewer figure {
  @apply mt-0 !important;
}
@media (min-width: 768px) {
  .devcard-desc > div {
    @apply max-w-full m-0;
  }
}

/* Command Palette */
/* --------------------------------------------------------------- */

.nj-commands-input {
  @apply bg-transparent text-white;
}
.nj-context-menu-item:hover:not([disabled]) {
  @apply cursor-pointer;
  background-color: rgba(255,255,255,.14);
}

/* Devdocs */
/* --------------------------------------------------------------- */

.logo, .logo-white {
  @apply block indent-[-999em];
  background: url(/images/nextjournal-logo.svg) center center no-repeat;
}
.devdocs-body {
  @apply font-inter;
}

/* Workarounds */
/* --------------------------------------------------------------- */

/* Fixes vega viewer resizing into infinity */
.vega-embed .chart-wrapper { @apply h-auto !important; }
/* fixes fraction separators being overridden by tw’s border-color */
.katex * { @apply border-black; }

@media print {
    .dark-mode-toggle,
    .toc-toggle { @apply hidden; }
    .notebook-viewer { @apply pt-0; font-size: 12pt !important; margin-left: 0 !important; }
    .code-viewer .cm-content,
    .viewer-code .cm-content { @apply whitespace-pre-wrap !important; overflow: none; }
    .code-viewer .cm-line { font-size: 12pt !important; }
    html * { page-break-inside: avoid !important; }
    .toc-panel { @apply hidden; }
}
</style><script src="https://storage.clerk.garden/nextjournal/clerk-assets@4NdW4yYfmUzzw9xCkmyrJ75nH75d/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"></head><body><div id="clerk-static-app"></div><script type="module">let state = "{:out-path \"public/build\", :path->doc {\"src/emmy/differential.cljc\" {:path [], :nextjournal/value {:toc {:type :toc, :children [{:children [{:type :toc, :content [{:type :text, :text \"Differentials, Dual Numbers and Automatic Differentiation\"}], :heading-level 2, :attrs {:id \"differentials,-dual-numbers-and-automatic-differentiation\"}, :path [:content 0], :children [{:type :toc, :content [{:type :text, :text \"Forward-Mode Automatic Differentiation\"}], :heading-level 3, :attrs {:id \"forward-mode-automatic-differentiation\"}, :path [:content 3]} {:type :toc, :content [{:type :text, :text \"Dual Numbers and AD\"}], :heading-level 3, :attrs {:id \"dual-numbers-and-ad\"}, :path [:content 8]} {:type :toc, :content [{:type :text, :text \"Multiple Variables, Nesting\"}], :heading-level 3, :attrs {:id \"multiple-variables,-nesting\"}, :path [:content 47]} {:type :toc, :content [{:type :text, :text \"What Return Values are Allowed?\"}], :heading-level 3, :attrs {:id \"what-return-values-are-allowed?\"}, :path [:content 56]}]} {:type :toc, :content [{:type :text, :text \"Differential Implementation\"}], :heading-level 2, :attrs {:id \"differential-implementation\"}, :path [:content 72]} {:type :toc, :content [{:type :text, :text \"Term List Algebra\"}], :heading-level 2, :attrs {:id \"term-list-algebra\"}, :path [:content 83]} {:type :toc, :content [{:type :text, :text \"Differential Type Implementation\"}], :heading-level 2, :attrs {:id \"differential-type-implementation\"}, :path [:content 98]} {:type :toc, :content [{:type :text, :text \"Accessor Methods\"}], :heading-level 2, :attrs {:id \"accessor-methods\"}, :path [:content 102]} {:type :toc, :content [{:type :text, :text \"Constructors\"}], :heading-level 2, :attrs {:id \"constructors\"}, :path [:content 103]} {:type :toc, :content [{:type :text, :text \"Differential API\"}], :heading-level 2, :attrs {:id \"differential-api\"}, :path [:content 105], :children [{:type :toc, :content [{:type :text, :text \"Differential Arithmetic\"}], :heading-level 3, :attrs {:id \"differential-arithmetic\"}, :path [:content 108]}]} {:type :toc, :content [{:type :text, :text \"Differential Parts API\"}], :heading-level 2, :attrs {:id \"differential-parts-api\"}, :path [:content 111]} {:type :toc, :content [{:type :text, :text \"Comparison, Control Flow\"}], :heading-level 2, :attrs {:id \"comparison,-control-flow\"}, :path [:content 114]} {:type :toc, :content [{:type :text, :text \"Chain Rule and Lifted Functions\"}], :heading-level 2, :attrs {:id \"chain-rule-and-lifted-functions\"}, :path [:content 122]} {:type :toc, :content [{:type :text, :text \"Generic Method Installation\"}], :heading-level 2, :attrs {:id \"generic-method-installation\"}, :path [:content 128]}], :type :toc}]}, :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns emmy.differential), :auto-expand-results? nil, :scope emmy.differential, :bundle? false, :open-graph {:type \"article:clerk\", :title \"Differentials, Dual Numbers and Automatic Differentiation\", :description \"This namespace develops an implementation of a type called [[Differential]]. A [[Differential]] is a generalization of a type called a \\\"dual number\\\".\"}, :title \"Differentials, Dual Numbers and Automatic Differentiation\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dqv2wxc5g6P3yeVpf34fjzViibYtE\"} [\"h2\" {:id \"differentials,-dual-numbers-and-automatic-differentiation\"} [:<> \"Differentials, Dual Numbers and Automatic Differentiation\"]] [:p [:<> \"This namespace develops an implementation of a type called [[Differential]].\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"A [[Differential]] is a generalization of a type called a \"] [:a {:href \"https://en.wikipedia.org/wiki/Dual_number\"} [:<> \"\\\"dual\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"number\\\"\"]] [:<> \".\"]] [:p [:<> \"As we'll discuss, passing these numbers as arguments to some function \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"built out of the [[emmy.generic]] operators allows us to build up the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:em [:<> \"derivative\"]] [:<> \" of \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" in parallel to our evaluation of \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \". Complex programs\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"are built out of simple pieces that we know how to evaluate; we can build up\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivatives of entire programs in a similar way by building them out of the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivatives of the smaller pieces of those programs.\"]] [\"h3\" {:id \"forward-mode-automatic-differentiation\"} [:<> \"Forward-Mode Automatic Differentiation\"]] [:p [:<> \"For many scientific computing applications, it's valuable be able to generate\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"a \\\"derivative\\\" of a function; given some tiny increment in the inputs, what\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"tiny increment will the function produce in the output values?\"]] [:p [:<> \"we know how to take derivatives of many of the generic functions exposed by\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"Emmy, like [[+]], [[*]], [[g/sin]] and friends. It turns out that we can\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"take the derivatives of large, complicated functions by combining the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivatives of these smaller functions using the \"] [:a {:href \"(https://en.wikipedia.org/wiki/Automatic_differentiation#The_chain_rule,_forward_and_reverse_accumulation)\"} [:<> \"chain\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"rule\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"as a clever bookkeeping device.\"]] [:p [:<> \"The technique of evaluating a function and its derivative in parallel is\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"called \\\"forward-mode \"] [:a {:href \"https://en.wikipedia.org/wiki/Automatic_differentiation\"} [:<> \"Automatic\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"Differentiation\"]] [:<> \"\\\".\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"The \"] [:a {:href \"https://github.com/mentat-collective/emmy/wiki/Automatic-Differentiation\"} [:<> \"Emmy\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"wiki\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"has more information on the history of this technique, and links to the many\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"other implementations you'll find in different languages. See the \"] [:a {:href \"https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/calculus/automatic-differentiation\"} [:<> \"cljdocs\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"Automatic Differentiation\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"page\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"for \\\"how do I use this?\\\"-style questions.\"]] [:blockquote [:p [:<> \"NOTE: The other flavor of automatic differentiation (AD) is \\\"reverse-mode\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"AD\\\". See [[emmy.tape]] for an implementation of this style, coming soon!\"]]] [\"h3\" {:id \"dual-numbers-and-ad\"} [:<> \"Dual Numbers and AD\"]] [:p [:<> \"Our goal is to build up derivatives of complex functions out of the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivatives of small pieces. A \"] [:a {:href \"https://en.wikipedia.org/wiki/Dual_number\"} [:<> \"dual\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"number\"]] [:<> \" is a relatively simple\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"piece of machinery that will help us accomplish this goal.\"]] [:p [:<> \"A \"] [:a {:href \"https://en.wikipedia.org/wiki/Dual_number\"} [:<> \"dual number\"]] [:<> \" is a pair of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"numbers of the form\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a + b \\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"where \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" and \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"b\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" are real numbers, and \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" is an abstract thing,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"with the property that \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon^2 = 0\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \".\"]] [:blockquote [:p [:<> \"NOTE: This might remind you of the definition of a complex number of the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"form \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a + bi\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", where \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"i\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" is also a new thing with the property that $i^2 =\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"-1$. You are very wise! The bigger idea lurking here is the \"] [:a {:href \"https://people.rit.edu/harkin/research/articles/generalized_complex_numbers.pdf\"} [:<> \"\\\"generalized\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"complex\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"number\\\"\"]] [:<> \".\"]]] [:p [:<> \"Why are dual numbers useful (in Emmy)? If you pass \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a+b\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" in\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"to a function \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", the result is a dual number \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(a) + Df(a) b \\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \";\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the result contains both the function evaluation and the derivative\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"evaluation at \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \"!\"]] [:p [:<> \"To see why, look at what happens when you pass a dual number into the \"] [:a {:href \"https://en.wikipedia.org/wiki/Taylor_series\"} [:<> \"Taylor\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"series expansion\"]] [:<> \" of some\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"arbitrary function \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \". As a reminder, the Taylor series expansion of \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"around some point \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" is:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(x) = f(a)+\\\\frac{Df(a)}{1!}(x-a)+\\\\frac{D^2f(a)}{2!}(x-a)^{2}+\\\\frac{D^3f(a)}{3!}(x-a)^{3}+\\\\cdots\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:blockquote [:p [:<> \"NOTE: See this nice overview of \"] [:a {:href \"https://medium.com/@andrew.chamberlain/an-easy-way-to-remember-the-taylor-series-expansion-a7c3f9101063\"} [:<> \"Taylor series\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"expansion\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"by Andrew Chamberlain if you want to understand this idea and why we can\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"approximate (smooth) functions this way.\"]]] [:p [:<> \"If you evaluate the expansion of \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(x)\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" around \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" with a dual number\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"argument whose first component is \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" -- take \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x=a+b\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", for example\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"-- watch how the expansion simplifies:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(a+b\\\\varepsilon) = f(a)+\\\\frac{Df(a)}{1!}(b\\\\varepsilon)+\\\\frac{D^2f(a)}{2!}(b\\\\varepsilon)^2+\\\\cdots\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"Since \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon^2=0\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" we can ignore all terms beyond the first two:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(a+b\\\\varepsilon) = f(a)+ (Df(a)b)\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:blockquote [:p [:<> \"NOTE: See [[lift-1]] for an implementation of this idea.\"]]] [:p [:<> \"This justifies our claim above: applying a function to some dual number\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a+\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" returns a new dual number, where\"]] [:ul [:li [:<> [:<> \"the first component is \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(a)\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", the normal function evaluation\"]]] [:li [:<> [:<> \"the second component is \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"Df(a)\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", the derivative.\"]]]] [:p [:<> \"If we do this twice, the second component of the returned dual number\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"beautifully recreates the \"] [:a {:href \"https://en.wikipedia.org/wiki/Chain_rule\"} [:<> \"Chain\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"Rule\"]] [:<> \":\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\n \\\\begin{aligned}\\n g(f(a+\\\\varepsilon)) &= g(f(a) + Df(a)\\\\varepsilon) \\\\\\\\\\n &= g(f(a)) + (Dg(f(a)))(Df(a))\\\\varepsilon\\n \\\\end{aligned}\\n \", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [\"h3\" {:id \"terminology-change\"} [:<> \"Terminology Change\"]] [:p [:<> \"A \\\"dual number\\\" is a very general idea. Because we're interested in dual\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"numbers as a bookkeeping device for derivatives, we're going to specialize\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"our terminology. From now on, we'll rename \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" and \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"b\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" to \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" and \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x'\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \". Given\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"a dual number of the form \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x+x'\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \": we'll refer to:\"]] [:ul [:li [:<> [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" as the \\\"primal\\\" part of the dual number\"]]] [:li [:<> [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x'\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" as the \\\"tangent\\\" part\"]]] [:li [:<> [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" as the \\\"tag\\\"\"]]]] [:blockquote [:p [:<> \"NOTE: \\\"primal\\\" means \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" is tracking the \\\"primal\\\", or \\\"primary\\\", part of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the computation. \\\"tangent\\\" is a synonym for \\\"derivative\\\". \\\"tag\\\" is going to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"make more sense shortly, when we start talking about mixing together\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"multiple \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon_1\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon_2\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" from different computations.\"]]] [\"h3\" {:id \"binary-functions\"} [:<> \"Binary Functions\"]] [:p [:<> \"What about functions of more than one variable? We can use the same approach\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"by leaning on the \"] [:a {:href \"https://en.wikipedia.org/wiki/Taylor_series#Taylor_series_in_several_variables\"} [:<> \"multivariable Taylor series\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"expansion\"]] [:<> \".\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"Take \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(x, y)\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" as a binary example. If we pass dual numbers in to the taylor\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"series expansion of \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", the \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" multiplication rule will erase all\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"higher-order terms, leaving us with:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(x+x'\\\\varepsilon, y+y'\\\\varepsilon) = f(x,y) + \\\\left[\\\\partial_1 f(x,y)x' + \\\\partial_2 f(x,y)y'\\\\right]\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:blockquote [:p [:<> \"NOTE: See [[lift-2]] for an implementation of this idea.\"]]] [:p [:<> \"This expansion generalizes for n-ary functions; every new argument $x_n +\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"x'_n\\\\varepsilon$ contributes \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\partial_n f(...)x'_n\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" to the result.\"]] [:p [:<> \"We can check this with the simple cases of addition, subtraction and\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"multiplication.\"]] [:p [:<> \"The real parts of a dual number add commutatively, so we can rearrange the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"components of a sum to get a new dual number:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"(x+x'\\\\varepsilon)+(y+y'\\\\varepsilon) == (x+y)+(x'+y')\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"This matches the \"] [:a {:href \"https://en.wikipedia.org/wiki/Differentiation_rules#Differentiation_is_linear\"} [:<> \"sum\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"rule\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"of differentiation, since the partials of \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x + y\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" with respect to either \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"or \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"y\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" both equal 1.\"]] [:p [:<> \"Subtraction is almost identical and agrees with the \"] [:a {:href \"https://en.wikipedia.org/wiki/Differentiation_rules#Differentiation_is_linear\"} [:<> \"subtraction\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"rule\"]] [:<> \":\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"(x+x'\\\\varepsilon)-(y+y'\\\\varepsilon) == (x-y)+(x'-y')\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"Multiplying out the components of two dual numbers again gives us a new dual\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"number, whose tangent component agrees with the \"] [:a {:href \"https://en.wikipedia.org/wiki/Product_rule\"} [:<> \"product\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"rule\"]] [:<> \":\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\n \\\\begin{aligned}\\n (x+ x'\\\\varepsilon)*(y+y'\\\\epsilon) &= xy+(xy')\\\\varepsilon+(x'y)\\\\varepsilon+(x'y')\\\\epsilon^2 \\\\\\\\\\n &= xy+(xy'+x'y)\\\\varepsilon\\n \\\\end{aligned}\\n \", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"Stare at these smaller derivations and convince yourself that they agree with\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the Taylor series expansion method for binary functions.\"]] [:p [:<> \"The upshot is that, armed with these techniques, we can implement a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"higher-order \"] [:code [:<> \"derivative\"]] [:<> \" function (almost!) as simply as this:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dqv2wxc5g6P3yeVpf34fjzViibYtE\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(comment\\n  (defn derivative [f]\\n    (fn [x]\\n      (extract-tangent\\n       (f (make-dual x 1))))))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dscdqZJUdgiCGe1oLGVXMzizdQCtQ-code\", :loc {:line 197, :end-line 201, :column 1, :end-column 31}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dscdqZJUdgiCGe1oLGVXMzizdQCtQ-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dr774oZ3j3nQAnrNFUcgGFbkMRVm8\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dscdqZJUdgiCGe1oLGVXMzizdQCtQ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drFM3Kztiw4yRAjHRyYqHmqYNY8bE\"} [:p [:<> \"As long as \"] [:code [:<> \"f\"]] [:<> \" is built out of functions that know how to apply themselves to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"dual numbers, this will all Just Work.\"]] [\"h3\" {:id \"multiple-variables,-nesting\"} [:<> \"Multiple Variables, Nesting\"]] [:p [:<> \"All of the examples above are about first-order derivatives. Taking\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"higher-order derivatives is, in theory, straightforward:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drFM3Kztiw4yRAjHRyYqHmqYNY8bE\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(comment\\n  (derivative\\n   (derivative f)))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drFtsXdrQ7VVkCoYtAYna9wDXhnJF-code\", :loc {:line 211, :end-line 213, :column 1, :end-column 20}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drFtsXdrQ7VVkCoYtAYna9wDXhnJF-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dscyayrFXKVNBftMTzDLJY6ogihgv\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drFtsXdrQ7VVkCoYtAYna9wDXhnJF-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsK7BqR9uabhMyG8MH7HjDStmhZHa\"} [:p [:<> \"But this guess hits one of many subtle problems with the implementation of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"forward-mode AD. The double-call to \"] [:code [:<> \"derivative\"]] [:<> \" will expand out to this:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsK7BqR9uabhMyG8MH7HjDStmhZHa\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(comment\\n  (fn [x]\\n    (letfn [(inner-d [x]\\n              (extract-tangent\\n               (f (make-dual x 1))))]\\n      (extract-tangent\\n       (inner-d\\n        (make-dual x 1))))))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5droSs1NtnrhgfYvx3vESWGz9iTFR1-code\", :loc {:line 218, :end-line 225, :column 1, :end-column 29}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5droSs1NtnrhgfYvx3vESWGz9iTFR1-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dtMhR8rRTfs7DaBHw2X96hBkU1piK\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5droSs1NtnrhgfYvx3vESWGz9iTFR1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsLdLRHY6TS2F8bS5qozu1iqx72tp\"} [:p [:<> \"the \"] [:code [:<> \"x\"]] [:<> \" received by \"] [:code [:<> \"inner-d\"]] [:<> \" will ALREADY be a dual number \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"x+\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \"!\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"This will cause two immediate problems:\"]] [:ul [:li [:p [:code [:<> \"(make-dual x 1)\"]] [:<> \" will return \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"(x+\\\\varepsilon)+\\\\varepsilon = x+2\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \",\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"which is not what we we want\"]]] [:li [:p [:<> \"The \"] [:code [:<> \"extract-tangent\"]] [:<> \" call inside \"] [:code [:<> \"inner-d\"]] [:<> \" will return the \"] [:code [:<> \"Df(x)\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"component of the dual number... which, remember, is no longer a dual\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"number! So the SECOND call to \"] [:code [:<> \"extract-tangent\"]] [:<> \" have nothing to extract,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"and can only sensibly return 0.\"]]]] [:p [:<> \"The problem here is called \\\"perturbation confusion\\\", and is covered in great\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"detail in\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:a {:href \"https://arxiv.org/abs/1211.4892\"} [:<> \"\\\"Confusion of Tagged Perturbations in Forward Automatic Differentiation of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"Higher-Order Functions\\\"\"]] [:<> \", by Manzyuk et\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"al. (2019).\"]] [:p [:<> \"The solution is to introduce a new \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" for every level, and allow\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"different \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" instances to multiply without annihilating. Each\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" is called a \\\"tag\\\". [[Differential]] (implemented below) is a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"generalized dual number that can track many tags at once, allowing nested\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivatives like the one described above to work.\"]] [:p [:<> \"This implies that \"] [:code [:<> \"extract-tangent\"]] [:<> \" needs to take a tag, to determine \"] [:em [:<> \"which\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"tangent to extract:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsLdLRHY6TS2F8bS5qozu1iqx72tp\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(comment\\n  (defn derivative [f]\\n    (let [tag (fresh-tag)]\\n      (fn [x]\\n        (-> (f (make-dual x 1 tag))\\n            (extract-tangent tag))))))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drXBvQtu9TuNEmjxAsnSaoD3danZX-code\", :loc {:line 253, :end-line 258, :column 1, :end-column 39}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drXBvQtu9TuNEmjxAsnSaoD3danZX-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dryWPnq6fyAQ4gBFz9g7chWYKC1Lc\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drXBvQtu9TuNEmjxAsnSaoD3danZX-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dspqq9DcDaTf3riV4XGTtS1oEmAYv\"} [:p [:<> \"This is close to the final form you'll find\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"at [[emmy.calculus.derivative/derivative]].\"]] [\"h3\" {:id \"what-return-values-are-allowed?\"} [:<> \"What Return Values are Allowed?\"]] [:p [:<> \"Before we discuss the implementation of dual\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"numbers (called [[Differential]]), [[lift-1]], [[lift-2]] and the rest of the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"machinery that makes this all possible; what sorts of objects is \"] [:code [:<> \"f\"]] [:<> \" allowed\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"to return?\"]] [:p [:<> \"The dual number approach is beautiful because we can bring to bear all sorts\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"of operations in Clojure that never even \"] [:em [:<> \"see\"]] [:<> \" dual numbers. For example,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:code [:<> \"square-and-cube\"]] [:<> \" called with a dual number returns a PAIR of dual numbers:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dspqq9DcDaTf3riV4XGTtS1oEmAYv\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(comment\\n  (defn square-and-cube [x]\\n    (let [x2 (g/square x)\\n          x3 (g/cube x)]\\n      [x2 x3])))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dttg4uFywCe17mdWHEJz2pAhTiFaf-code\", :loc {:line 274, :end-line 278, :column 1, :end-column 17}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dttg4uFywCe17mdWHEJz2pAhTiFaf-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5du36tuPD84j7vrgXSYKynCBo8Bd3J\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dttg4uFywCe17mdWHEJz2pAhTiFaf-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dtZn9FBNAZGJKVE1RmwQNwAcWpoAp\"} [:p [:<> \"Vectors don't care what they contain! We want the derivative of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:code [:<> \"square-and-cube\"]] [:<> \" to also return a vector, whose entries represent the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivative of \"] [:em [:<> \"that entry\"]] [:<> \" with respect to the function's input.\"]] [:p [:<> \"But this implies that [[extract-tangent]] from the example above needs to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"know how to handle vectors and other collections; in the case of a vector \"] [:code [:<> \"v\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"by returning \"] [:code [:<> \"(mapv extract-tangent v)\"]] [:<> \".\"]] [:p [:<> \"What about higher-order functions?\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dtZn9FBNAZGJKVE1RmwQNwAcWpoAp\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(comment\\n  (defn offset-fn\\n    \\\"Returns a function that takes a single-argument function `g`, and returns a new\\n  function like `g` that offsets its input by `offset`.\\\"\\n    [offset]\\n    (fn [g]\\n      (fn [x]\\n        (g (+ x offset))))))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtMkuWC1web1cW1EHd7EX1pT47D6E-code\", :loc {:line 290, :end-line 297, :column 1, :end-column 29}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtMkuWC1web1cW1EHd7EX1pT47D6E-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dsKMd4J9hpcCvcQvnE25mUn9HKPk9\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtMkuWC1web1cW1EHd7EX1pT47D6E-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dss5N6KZ3DBKTktxejmBjTtRs9D1V\"} [:p [:code [:<> \"(derivative offset-fn)\"]] [:<> \" here returns a function! Manzyuk et al. 2019 makes\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the reasonable claim that, if \"] [:code [:<> \"(f x)\"]] [:<> \" returns a function, then \"] [:code [:<> \"(derivative  f)\"]] [:<> \" should treat \"] [:code [:<> \"f\"]] [:<> \" as a multi-argument function with its first argument\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"curried.\"]] [:p [:<> \"Let's say \"] [:code [:<> \"f\"]] [:<> \" takes a number \"] [:code [:<> \"x\"]] [:<> \" and returns a function \"] [:code [:<> \"g\"]] [:<> \" that maps number\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"=> number. \"] [:code [:<> \"(((derivative f) x) y)\"]] [:<> \" should act just like the partial\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivative of the equivalent multi-argument function, with respect to the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"first argument:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:div.code-viewer.code-listing [#viewer-eval nextjournal.clerk.render/inspect-presented {:path [0], :nextjournal/value \"(((partial 0) f-flattened) x y)\", :nextjournal/viewer {:name nextjournal.clerk.viewer/code-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5dsJQw12yyyd7TcZEf52VSHxnqnJUC\"}}]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:p [:<> \"In other words, \"] [:code [:<> \"(derivative offset-fn)\"]] [:<> \" should act just like:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dss5N6KZ3DBKTktxejmBjTtRs9D1V\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(comment\\n  (derivative\\n   (fn [offset] (g (+ x offset)))))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsCXA29TNSYPwLGtmm1NZmDuc6kzK-code\", :loc {:line 315, :end-line 317, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsCXA29TNSYPwLGtmm1NZmDuc6kzK-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5duKKiGf9JR3xaNt4KtnxoY1GzL1gJ\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsCXA29TNSYPwLGtmm1NZmDuc6kzK-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drMD36vPdmZV8TnTAwqnmp71Ww96B\"} [:p [:<> \"for some known \"] [:code [:<> \"g\"]] [:<> \" and \"] [:code [:<> \"x\"]] [:<> \", but with the ability to store \"] [:code [:<> \"(derivative  offset-fn)\"]] [:<> \" and call it later with many different \"] [:code [:<> \"g\"]] [:<> \".\"]] [:blockquote [:p [:<> \"NOTE: We might accomplish this by composing \"] [:code [:<> \"extract-tangent\"]] [:<> \" with the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"returned function, so that the extraction happens later, when the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"function's called... but that will fail. The real implementation is more\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"subtle! See the [[emmy.calculus.derivative]] namespace for the actual\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"implementation of [[IPerturbed]] for functions and multimethods.\"]]] [:p [:<> \"All of this suggests that we need to make [[extract-tangent]] an open\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"function that other folks can extend for other container-like\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"types (\"] [:a {:href \"https://en.wikipedia.org/wiki/Functor\"} [:<> \"functors\"]] [:<> \", specifically).\"]] [:p [:<> \"The [[IPerturbed]] protocol accomplishes this, along with two other functions\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"that we'll use later:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drMD36vPdmZV8TnTAwqnmp71Ww96B\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defprotocol IPerturbed\\n  (perturbed? [this]\\n    \\\"Returns true if the supplied object has some known non-zero tangent to be\\n    extracted via [[extract-tangent]], false otherwise. (Return `false` by\\n    default if you can't detect a perturbation.)\\\")\\n\\n  (replace-tag [this old-tag new-tag]\\n    \\\"If `this` is perturbed, Returns a similar object with the perturbation\\n    modified by replacing any appearance of `old-tag` with `new-tag`. Else,\\n    return `this`.\\\")\\n\\n  (extract-tangent [this tag]\\n    \\\"If `this` is perturbed, return the tangent component paired with the\\n    supplied tag. Else, returns `([[emmy.value/zero-like]] this)`.\\\"))\", :nextjournal/opts {:id \"emmy.differential/IPerturbed-code\", :loc {:line 335, :end-line 348, :column 1, :end-column 70}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value :impls, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1], :nextjournal/value [{:path [0 1 0], :nextjournal/value [{:path [0 1 0 0], :nextjournal/value \"java.lang.Object\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 0 1], :nextjournal/value [{:path [0 1 0 1 0], :nextjournal/value [{:path [0 1 0 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 0 1 0 1], :nextjournal/value \"#object[emmy.differential$eval61496$fn__61501 0x24790b76 \\\"emmy.differential$eval61496$fn__61501@24790b76\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 0 1 1], :nextjournal/value [{:path [0 1 0 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 0 1 1 1], :nextjournal/value \"#object[emmy.differential$eval61496$fn__61497 0x3b62973f \\\"emmy.differential$eval61496$fn__61497@3b62973f\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 0 1 2], :nextjournal/value [{:path [0 1 0 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 0 1 2 1], :nextjournal/value \"#object[emmy.differential$eval61496$fn__61499 0x4acfaae9 \\\"emmy.differential$eval61496$fn__61499@4acfaae9\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 1], :nextjournal/value [{:path [0 1 1 0], :nextjournal/value \"clojure.lang.IPersistentVector\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 1 1], :nextjournal/value [{:path [0 1 1 1 0], :nextjournal/value [{:path [0 1 1 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 1 1 0 1], :nextjournal/value \"#object[emmy.collection$eval40647$fn__40674 0x26012a7d \\\"emmy.collection$eval40647$fn__40674@26012a7d\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 1 1 1], :nextjournal/value [{:path [0 1 1 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 1 1 1 1], :nextjournal/value \"#object[emmy.collection$eval40647$fn__40668 0x22b28ef \\\"emmy.collection$eval40647$fn__40668@22b28ef\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 1 1 2], :nextjournal/value [{:path [0 1 1 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 1 1 2 1], :nextjournal/value \"#object[emmy.collection$eval40647$fn__40670 0x2ddf9cfa \\\"emmy.collection$eval40647$fn__40670@2ddf9cfa\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 2], :nextjournal/value [{:path [0 1 2 0], :nextjournal/value \"clojure.lang.ISeq\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 2 1], :nextjournal/value [{:path [0 1 2 1 0], :nextjournal/value [{:path [0 1 2 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 2 1 0 1], :nextjournal/value \"#object[emmy.collection$eval40685$fn__40710 0x1af0e34a \\\"emmy.collection$eval40685$fn__40710@1af0e34a\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 2 1 1], :nextjournal/value [{:path [0 1 2 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 2 1 1 1], :nextjournal/value \"#object[emmy.collection$eval40685$fn__40704 0x358d60ab \\\"emmy.collection$eval40685$fn__40704@358d60ab\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 2 1 2], :nextjournal/value [{:path [0 1 2 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 2 1 2 1], :nextjournal/value \"#object[emmy.collection$eval40685$fn__40706 0x6eba4aa5 \\\"emmy.collection$eval40685$fn__40706@6eba4aa5\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 3], :nextjournal/value [{:path [0 1 3 0], :nextjournal/value \"clojure.lang.PersistentHashMap\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 3 1], :nextjournal/value [{:path [0 1 3 1 0], :nextjournal/value [{:path [0 1 3 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 3 1 0 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40825 0x3f5323c4 \\\"emmy.collection$eval40798$fn__40825@3f5323c4\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 3 1 1], :nextjournal/value [{:path [0 1 3 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 3 1 1 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40819 0x22a47dd7 \\\"emmy.collection$eval40798$fn__40819@22a47dd7\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 3 1 2], :nextjournal/value [{:path [0 1 3 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 3 1 2 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40821 0x7cf2c910 \\\"emmy.collection$eval40798$fn__40821@7cf2c910\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 4], :nextjournal/value [{:path [0 1 4 0], :nextjournal/value \"clojure.lang.PersistentArrayMap\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 4 1], :nextjournal/value [{:path [0 1 4 1 0], :nextjournal/value [{:path [0 1 4 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 4 1 0 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40825 0x40215b49 \\\"emmy.collection$eval40798$fn__40825@40215b49\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 4 1 1], :nextjournal/value [{:path [0 1 4 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 4 1 1 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40819 0x66ca0d8a \\\"emmy.collection$eval40798$fn__40819@66ca0d8a\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 4 1 2], :nextjournal/value [{:path [0 1 4 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 4 1 2 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40821 0x67818e41 \\\"emmy.collection$eval40798$fn__40821@67818e41\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 5], :nextjournal/value [{:path [0 1 5 0], :nextjournal/value \"clojure.lang.PersistentTreeMap\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 5 1], :nextjournal/value [{:path [0 1 5 1 0], :nextjournal/value [{:path [0 1 5 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 5 1 0 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40825 0xd5171e8 \\\"emmy.collection$eval40798$fn__40825@d5171e8\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 5 1 1], :nextjournal/value [{:path [0 1 5 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 5 1 1 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40819 0x47609818 \\\"emmy.collection$eval40798$fn__40819@47609818\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 5 1 2], :nextjournal/value [{:path [0 1 5 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 5 1 2 1], :nextjournal/value \"#object[emmy.collection$eval40798$fn__40821 0x71f07b23 \\\"emmy.collection$eval40798$fn__40821@71f07b23\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 6], :nextjournal/value [{:path [0 1 6 0], :nextjournal/value \"clojure.lang.MultiFn\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 6 1], :nextjournal/value [{:path [0 1 6 1 0], :nextjournal/value [{:path [0 1 6 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 6 1 0 1], :nextjournal/value \"#object[emmy.calculus.derivative$eval46876$fn__46881 0x1a6810da \\\"emmy.calculus.derivative$eval46876$fn__46881@1a6810da\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 6 1 1], :nextjournal/value [{:path [0 1 6 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 6 1 1 1], :nextjournal/value \"#object[emmy.calculus.derivative$eval46876$fn__46877 0x1c30ec4e \\\"emmy.calculus.derivative$eval46876$fn__46877@1c30ec4e\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 6 1 2], :nextjournal/value [{:path [0 1 6 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 6 1 2 1], :nextjournal/value \"#object[emmy.calculus.derivative$eval46876$fn__46879 0x5f531788 \\\"emmy.calculus.derivative$eval46876$fn__46879@5f531788\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 7], :nextjournal/value [{:path [0 1 7 0], :nextjournal/value \"clojure.lang.Fn\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}} {:path [0 1 7 1], :nextjournal/value [{:path [0 1 7 1 0], :nextjournal/value [{:path [0 1 7 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 7 1 0 1], :nextjournal/value \"#object[emmy.calculus.derivative$eval46884$fn__46889 0x2d084622 \\\"emmy.calculus.derivative$eval46884$fn__46889@2d084622\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 7 1 1], :nextjournal/value [{:path [0 1 7 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 7 1 1 1], :nextjournal/value \"#object[emmy.calculus.derivative$eval46884$fn__46885 0x773c7d99 \\\"emmy.calculus.derivative$eval46884$fn__46885@773c7d99\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [0 1 7 1 2], :nextjournal/value [{:path [0 1 7 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [0 1 7 1 2 1], :nextjournal/value \"#object[emmy.calculus.derivative$eval46884$fn__46887 0x6cf5bdac \\\"emmy.calculus.derivative$eval46884$fn__46887@6cf5bdac\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\" \"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value :method-builders, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [1 1], :nextjournal/value [{:path [1 1 0], :nextjournal/value [{:path [1 1 0 0], :nextjournal/value emmy.differential/perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.inspected-value [:span.cmt-meta \"#'\" (str x)]]), :hash \"5drs7vgGraoX5qbHgoxm3VJgevpUt5\"}} {:path [1 1 0 1], :nextjournal/value \"#object[emmy.differential$eval61451$fn__61452 0x2b5d18ed \\\"emmy.differential$eval61451$fn__61452@2b5d18ed\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [1 1 1], :nextjournal/value [{:path [1 1 1 0], :nextjournal/value emmy.differential/extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.inspected-value [:span.cmt-meta \"#'\" (str x)]]), :hash \"5drs7vgGraoX5qbHgoxm3VJgevpUt5\"}} {:path [1 1 1 1], :nextjournal/value \"#object[emmy.differential$eval61451$fn__61463 0x448b62f2 \\\"emmy.differential$eval61451$fn__61463@448b62f2\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [1 1 2], :nextjournal/value [{:path [1 1 2 0], :nextjournal/value emmy.differential/replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.inspected-value [:span.cmt-meta \"#'\" (str x)]]), :hash \"5drs7vgGraoX5qbHgoxm3VJgevpUt5\"}} {:path [1 1 2 1], :nextjournal/value \"#object[emmy.differential$eval61451$fn__61476 0x50cf0f4f \\\"emmy.differential$eval61451$fn__61476@50cf0f4f\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [2], :nextjournal/value [{:path [2 0], :nextjournal/value :method-map, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [2 1], :nextjournal/value [{:path [2 1 0], :nextjournal/value [{:path [2 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [2 1 0 1], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [2 1 1], :nextjournal/value [{:path [2 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [2 1 1 1], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [2 1 2], :nextjournal/value [{:path [2 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [2 1 2 1], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [3], :nextjournal/value [{:path [3 0], :nextjournal/value :on, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [3 1], :nextjournal/value emmy.differential.IPerturbed, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-keyword.inspected-value (str x)]), :hash \"5drtJS1B8fSwesV38M9fttSWDXY6Fr\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [4], :nextjournal/value [{:path [4 0], :nextjournal/value :on-interface, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [4 1], :nextjournal/value \"emmy.differential.IPerturbed\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5], :nextjournal/value [{:path [5 0], :nextjournal/value :sigs, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1], :nextjournal/value [{:path [5 1 0], :nextjournal/value [{:path [5 1 0 0], :nextjournal/value :extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1], :nextjournal/value [{:path [5 1 0 1 0], :nextjournal/value [{:path [5 1 0 1 0 0], :nextjournal/value :arglists, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 0 1], :nextjournal/value [{:path [5 1 0 1 0 1 0], :nextjournal/value [{:path [5 1 0 1 0 1 0 0], :nextjournal/value this, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-keyword.inspected-value (str x)]), :hash \"5drtJS1B8fSwesV38M9fttSWDXY6Fr\"}} {:path [5 1 0 1 0 1 0 1], :nextjournal/value tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-keyword.inspected-value (str x)]), :hash \"5drtJS1B8fSwesV38M9fttSWDXY6Fr\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\" \")\"), :page-size 20, :hash \"5dsKpRYUuGnwVK3BPfAoiJqkhVbPzH\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"(\", :page-size 20, :hash \"5drCaZg3GZ5pGiaCNpMq9dEBvceFbm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 0 1 1], :nextjournal/value [{:path [5 1 0 1 1 0], :nextjournal/value :col, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 1 1], :nextjournal/value 4, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 0 1 2], :nextjournal/value [{:path [5 1 0 1 2 0], :nextjournal/value :doc, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 2 1], :nextjournal/value [\"If `this` is perturbed, return the tangent component paired with the\\n    supplie\" {:nextjournal/value {:n 80, :path [5 1 0 1 2 1], :total 90, :unbounded? true, :offset 80, :replace-path [5 1 0 1 2 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsc8hKzdYc787YrnnWStEqLBFykdE\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 0 1 3], :nextjournal/value [{:path [5 1 0 1 3 0], :nextjournal/value :end-col, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 3 1], :nextjournal/value 19, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 0 1 4], :nextjournal/value [{:path [5 1 0 1 4 0], :nextjournal/value :end-row, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 4 1], :nextjournal/value 12, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 0 1 5], :nextjournal/value [{:path [5 1 0 1 5 0], :nextjournal/value :name, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 5 1], :nextjournal/value extract-tangent, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-keyword.inspected-value (str x)]), :hash \"5drtJS1B8fSwesV38M9fttSWDXY6Fr\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 0 1 6], :nextjournal/value [{:path [5 1 0 1 6 0], :nextjournal/value :row, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 6 1], :nextjournal/value 12, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 0 1 7], :nextjournal/value [{:path [5 1 0 1 7 0], :nextjournal/value :tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 0 1 7 1], :nextjournal/value nil, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1], :nextjournal/value [{:path [5 1 1 0], :nextjournal/value :perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1], :nextjournal/value [{:path [5 1 1 1 0], :nextjournal/value [{:path [5 1 1 1 0 0], :nextjournal/value :arglists, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 0 1], :nextjournal/value [{:path [5 1 1 1 0 1 0], :nextjournal/value [{:path [5 1 1 1 0 1 0 0], :nextjournal/value this, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-keyword.inspected-value (str x)]), :hash \"5drtJS1B8fSwesV38M9fttSWDXY6Fr\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\" \")\"), :page-size 20, :hash \"5dsKpRYUuGnwVK3BPfAoiJqkhVbPzH\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"(\", :page-size 20, :hash \"5drCaZg3GZ5pGiaCNpMq9dEBvceFbm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1 1 1], :nextjournal/value [{:path [5 1 1 1 1 0], :nextjournal/value :col, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 1 1], :nextjournal/value 4, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1 1 2], :nextjournal/value [{:path [5 1 1 1 2 0], :nextjournal/value :doc, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 2 1], :nextjournal/value [\"Returns true if the supplied object has some known non-zero tangent to be\\n    ex\" {:nextjournal/value {:n 80, :path [5 1 1 1 2 1], :total 90, :unbounded? true, :offset 80, :replace-path [5 1 1 1 2 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsc8hKzdYc787YrnnWStEqLBFykdE\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1 1 3], :nextjournal/value [{:path [5 1 1 1 3 0], :nextjournal/value :end-col, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 3 1], :nextjournal/value 14, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1 1 4], :nextjournal/value [{:path [5 1 1 1 4 0], :nextjournal/value :end-row, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 4 1], :nextjournal/value 2, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1 1 5], :nextjournal/value [{:path [5 1 1 1 5 0], :nextjournal/value :name, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 5 1], :nextjournal/value perturbed?, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-keyword.inspected-value (str x)]), :hash \"5drtJS1B8fSwesV38M9fttSWDXY6Fr\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1 1 6], :nextjournal/value [{:path [5 1 1 1 6 0], :nextjournal/value :row, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 6 1], :nextjournal/value 2, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 1 1 7], :nextjournal/value [{:path [5 1 1 1 7 0], :nextjournal/value :tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 1 1 7 1], :nextjournal/value nil, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 2], :nextjournal/value [{:path [5 1 2 0], :nextjournal/value :replace-tag, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 2 1], :nextjournal/value [{:path [5 1 2 1 0], :nextjournal/value [{:path [5 1 2 1 0 0], :nextjournal/value :arglists, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 2 1 0 1], :nextjournal/value [{:path [5 1 2 1 0 1 0], :nextjournal/value [{:path [5 1 2 1 0 1 0 0], :nextjournal/value this, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-keyword.inspected-value (str x)]), :hash \"5drtJS1B8fSwesV38M9fttSWDXY6Fr\"}} {:nextjournal/value {:n 20, :path [5 1 2 1 0 1 0], :total 3, :offset 1}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\" \")\"), :page-size 20, :hash \"5dsKpRYUuGnwVK3BPfAoiJqkhVbPzH\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"(\", :page-size 20, :hash \"5drCaZg3GZ5pGiaCNpMq9dEBvceFbm\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 2 1 1], :nextjournal/value [{:path [5 1 2 1 1 0], :nextjournal/value :col, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 2 1 1 1], :nextjournal/value 4, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 2 1 2], :nextjournal/value [{:path [5 1 2 1 2 0], :nextjournal/value :doc, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 2 1 2 1], :nextjournal/value [\"If `this` is perturbed, Returns a similar object with the perturbation\\n    modif\" {:nextjournal/value {:n 80, :path [5 1 2 1 2 1], :total 90, :unbounded? true, :offset 80, :replace-path [5 1 2 1 2 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsc8hKzdYc787YrnnWStEqLBFykdE\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 2 1 3], :nextjournal/value [{:path [5 1 2 1 3 0], :nextjournal/value :end-col, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 2 1 3 1], :nextjournal/value 15, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [5 1 2 1 4], :nextjournal/value [{:path [5 1 2 1 4 0], :nextjournal/value :end-row, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [5 1 2 1 4 1], :nextjournal/value 7, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5dr5kWRtr7mCj9ikbmX2S4HCkE4Xxt\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:nextjournal/value {:n 10, :path [5 1 2 1], :total 8, :offset 5}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\" \"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}} {:path [6], :nextjournal/value [{:path [6 0], :nextjournal/value :var, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dtMJq6BG3cxBNTzMX8N9ybiVihU3P\"}} {:path [6 1], :nextjournal/value emmy.differential/IPerturbed, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.inspected-value [:span.cmt-meta \"#'\" (str x)]]), :hash \"5drs7vgGraoX5qbHgoxm3VJgevpUt5\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5du1Jokva1fSP87JT6oepkbdJbMMKB\"}}], :nextjournal/opts {:id \"emmy.differential/IPerturbed-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :closing-paren (\"}\"), :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}, :nextjournal/blob-id \"8VuzJUCfALc8WE6ujBYv3hs5rT7Twkx5tL8McawSYGLyYcqyLDZesiW4C5NRrD5tuzyXgj4ZvEDQAq2U8yDiHR2XNk\"}, :nextjournal/opts {:id \"emmy.differential/IPerturbed-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsZm9AhJ6Pi7TjkFKvnDGq9gEyNfK\"} [:p [:code [:<> \"replace-tag\"]] [:<> \" exists to handle subtle bugs that can arise in the case of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"functional return values. See the \\\"Amazing Bug\\\" sections\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"in [[emmy.calculus.derivative-test]] for detailed examples on how this\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"might bite you.\"]] [:p [:<> \"The default implementations are straightforward, and match the docstrings:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsZm9AhJ6Pi7TjkFKvnDGq9gEyNfK\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(extend-protocol IPerturbed\\n  #?(:clj Object :cljs default)\\n  (perturbed? [_] false)\\n  (replace-tag [this _ _] this)\\n  (extract-tangent [this _] (v/zero-like this)))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drmCY6KmaePbc3f7k7B7ZHPzPEcab-code\", :loc {:line 357, :end-line 361, :column 1, :end-column 49}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drmCY6KmaePbc3f7k7B7ZHPzPEcab-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dtTx8Chu4vbKtx9g33JWmVS2mLnYT\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drmCY6KmaePbc3f7k7B7ZHPzPEcab-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drBWPxZZcYJBnkVzvrq7qtEJdDeSu\"} [\"h2\" {:id \"differential-implementation\"} [:<> \"Differential Implementation\"]] [:p [:<> \"We now have a template for how to implement \"] [:code [:<> \"derivative\"]] [:<> \". What's left? We\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"need a dual number type that we can build and split back out into primal and\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"tangent components, given some tag. We'll call this type a [[Differential]].\"]] [:p [:<> \"A [[Differential]] is a generalized dual number with a single primal\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"component, and potentially many tagged terms. Identical tags cancel to 0 when\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"multiplied, but are allowed to multiply by each other:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"a + b\\\\varepsilon_1 + c\\\\varepsilon_2 + d\\\\varepsilon_1 \\\\varepsilon_2 + \\\\cdots\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"Alternatively, you can view a [[Differential]] as a dual number with a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"specific tag, that's able to hold dual numbers with some \"] [:em [:<> \"other\"]] [:<> \" tag in its\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"primal and tangent slots. You can turn a [[Differential]] into a dual number\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"by specifying one of its tags. Here are the primal and tangent components for\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon_2\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \":\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"(a + b\\\\varepsilon_1) + (c + d\\\\varepsilon_1)\\\\varepsilon_2\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"And for \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon_1\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \":\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"(a + c\\\\varepsilon_2) + (b + d \\\\varepsilon_2) \\\\varepsilon_1\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"A differential term is implemented as a pair whose first element is a set of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"tags and whose second is the coefficient.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drBWPxZZcYJBnkVzvrq7qtEJdDeSu\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn- tags [term]\\n  (nth term 0))\", :nextjournal/opts {:id \"emmy.differential/tags-code\", :loc {:line 390, :end-line 391, :column 1, :end-column 16}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$tags 0x4dcc5cc1 \\\"emmy.differential$tags@4dcc5cc1\\\"]\", :nextjournal/opts {:id \"emmy.differential/tags-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/tags-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- coefficient [term]\\n  (nth term 1))\", :nextjournal/opts {:id \"emmy.differential/coefficient-code\", :loc {:line 393, :end-line 394, :column 1, :end-column 16}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$coefficient 0x65d18740 \\\"emmy.differential$coefficient@65d18740\\\"]\", :nextjournal/opts {:id \"emmy.differential/coefficient-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/coefficient-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsAPniyis8ivyNHQSAmghoRqiRsc9\"} [:p [:<> \"The set of tags is implemented as a \\\"vector set\\\",\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"from [[emmy.util.vector-set]]. This is a sorted set data structure,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"backed by a Clojure vector. vector sets provide cheap \\\"max\\\" and \\\"min\\\"\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"operations, and acceptable union, intersection and difference performance.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsAPniyis8ivyNHQSAmghoRqiRsc9\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn make-term\\n  \\\"Returns a [[Differential]] term with the supplied vector-set of `tags` paired\\n  with coefficient `coef`.\\n\\n  `tags` defaults to [[uv/empty-set]]\\\"\\n  ([coef] [uv/empty-set coef])\\n  ([tags coef] [tags coef]))\", :nextjournal/opts {:id \"emmy.differential/make-term-code\", :loc {:line 401, :end-line 407, :column 1, :end-column 29}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$make_term 0x42e17435 \\\"emmy.differential$make_term@42e17435\\\"]\", :nextjournal/opts {:id \"emmy.differential/make-term-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/make-term-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsL42uMRTyVYvbvsjzTrF4iAZNLpE\"} [:p [:<> \"Since the only use of a tag is to distinguish each unnamed \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon_n\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \",\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"we'll assign a new, unique positive integer for each new tag:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsL42uMRTyVYvbvsjzTrF4iAZNLpE\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(let [next-tag (atom -1)]\\n  (defn fresh-tag\\n    \\\"Returns a new, unique tag for use inside of a [[Differential]] term list.\\\"\\n    []\\n    (swap! next-tag inc)))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtqT8xjRCyTZHBe5rS2jFxbFfH3jX-code\", :loc {:line 412, :end-line 416, :column 1, :end-column 27}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value emmy.differential/fresh-tag, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtqT8xjRCyTZHBe5rS2jFxbFfH3jX-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.inspected-value [:span.cmt-meta \"#'\" (str x)]]), :hash \"5drs7vgGraoX5qbHgoxm3VJgevpUt5\"}}, :nextjournal/blob-id \"5dszbMEsrrEBHNMZ7ete4e5DKHeENE\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtqT8xjRCyTZHBe5rS2jFxbFfH3jX-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- tag-in-term?\\n  \\\"Return true if `t` is in the tag-set of the supplied `term`, false otherwise.\\\"\\n  [term t]\\n  (uv/contains? (tags term) t))\", :nextjournal/opts {:id \"emmy.differential/tag-in-term?-code\", :loc {:line 418, :end-line 421, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$tag_in_term_QMARK_ 0x69411f89 \\\"emmy.differential$tag_in_term_QMARK_@69411f89\\\"]\", :nextjournal/opts {:id \"emmy.differential/tag-in-term?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/tag-in-term?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dtSnP2MeKpwxyFzX7av8kK1s9b3Po\"} [\"h2\" {:id \"term-list-algebra\"} [:<> \"Term List Algebra\"]] [:p [:<> \"The discussion above about Taylor series expansions revealed that for single\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"variable functions, we can pass a dual number into any function whose\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivative we already know:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f(a+b\\\\varepsilon) = f(a) + (Df(a)b)\\\\varepsilon\", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"Because we can split a [[Differential]] into a primal and tangent component\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"with respect to some tag, we can reuse this result. We'll default to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"splitting [[Differential]] instances by the highest-index tag:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\n \\\\begin{aligned}\\n f(a &+ b\\\\varepsilon_1 + c\\\\varepsilon_2 + d\\\\varepsilon_1 \\\\varepsilon_2) \\\\\\\\\\n &= f((a + b\\\\varepsilon_1)+(c + d\\\\varepsilon_1)\\\\varepsilon_2) \\\\\\\\\\n &= f(a + b\\\\varepsilon_1)+Df(a + b\\\\varepsilon_1)(c + d\\\\varepsilon_1)\\\\varepsilon_2 \\\\\\\\\\n \\\\end{aligned}\\n \", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"Note that \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"f\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" and \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"Df\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \" both received a dual number! One more expansion, this\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"time in \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon_1\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \", completes the evaluation (and makes abundantly clear\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"why we want the computer doing this, not pencil-and-paper):\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\n \\\\begin{aligned}\\n f(a &+ b\\\\varepsilon_1)+Df(a+b\\\\varepsilon_1)(c+d\\\\varepsilon_1)\\\\varepsilon_2 \\\\\\\\\\n &= (f(a)+Df(a)b\\\\varepsilon_1)+(Df(a)+D^2f(a)b\\\\varepsilon_1)(c + d\\\\varepsilon_1)\\\\varepsilon_2 \\\\\\\\\\n &= f(a)+(Df(a)b+D^2f(a)bc)\\\\varepsilon_1+Df(a)c\\\\varepsilon_2+Df(a)d\\\\varepsilon_1\\\\varepsilon_2\\n \\\\end{aligned}\\n \", :nextjournal/viewer {:name :nextjournal.markdown/block-formula, :render-fn #viewer-fn nextjournal.clerk.render/render-katex, :hash \"5dtLYB93Mi3NowoYurf1Ue76yrXtDC\"}}] [:p [:<> \"The only operations we need to implement between lists of terms are addition\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"and multiplication.\"]] [\"h3\" {:id \"add-and-multiply\"} [:<> \"Add and Multiply\"]] [:p [:<> \"To efficiently add two [[Differential]] instances (represented as lists of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"terms), we keep all terms in sorted order, sorted first by the length of each\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"tag list (the \\\"order\\\" of the differential term), and secondarily by the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"values of the tags inside the tag list.\"]] [:blockquote [:p [:<> \"NOTE: Clojure vectors already implement this ordering properly, so we can\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"use [[clojure.core/compare]] to determine an ordering on a tag list.\"]]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dtSnP2MeKpwxyFzX7av8kK1s9b3Po\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(def ^:private terms:+\\n  \\\"Returns the sum of the two supplied sequences of differential terms; any terms\\n  in the result with a zero coefficient will be removed.\\n\\n  Each input must be sequence of `[tag-set, coefficient]` pairs, sorted by\\n  `tag-set`.\\\"\\n  (ua/merge-fn core/compare g/add v/zero? make-term))\", :nextjournal/opts {:id \"emmy.differential/terms:+-code\", :loc {:line 468, :end-line 474, :column 1, :end-column 54}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.util.aggregate$merge_fn$fn__36735 0x46c47c34 \\\"emmy.util.aggregate$merge_fn$fn__36735@46c47c34\\\"]\", :nextjournal/opts {:id \"emmy.differential/terms:+-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/terms:+-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dtdyHzmgDwN3YBKigMkmyW54NYs6k\"} [:p [:<> \"Because we've decided to store terms as a vector, we can multiply two vectors\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"of terms by:\"]] [:ul [:li [:<> [:<> \"taking the cartesian product of both term lists\"]]] [:li [:<> [:<> \"discarding all pairs of terms that share any tag (since \"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"\\\\varepsilon^2=0\", :nextjournal/viewer {:name :nextjournal.markdown/formula, :render-fn #viewer-fn (fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true})), :hash \"5dspkZgXrsvrVyyn8N8QfXTGXbEniK\"}}] [:<> \")\"]]] [:li [:<> [:<> \"multiplying the coefficients of all remaining pairs and union-ing their tag\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"lists\"]]] [:li [:<> [:<> \"grouping and adding any new terms with the SAME list of tags, and filtering\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"out zeros\"]]]] [:p [:<> \"This final step is required by a number of different operations later, so we\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"break it out into its own [[collect-terms]] function:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dtdyHzmgDwN3YBKigMkmyW54NYs6k\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn- collect-terms\\n  \\\"Build a term list up of pairs of tags => coefficients by grouping together and\\n  summing coefficients paired with the same term list.\\n\\n  The result will be sorted by term list, and contain no duplicate term lists.\\\"\\n  [tags->coefs]\\n  (let [terms (for [[tags tags-coefs] (group-by tags tags->coefs)\\n                    :let [c (transduce (map coefficient) g/+ tags-coefs)]\\n                    :when (not (v/zero? c))]\\n                [tags c])]\\n    (into [] (sort-by tags terms))))\", :nextjournal/opts {:id \"emmy.differential/collect-terms-code\", :loc {:line 489, :end-line 499, :column 1, :end-column 37}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$collect_terms 0x2fc6182b \\\"emmy.differential$collect_terms@2fc6182b\\\"]\", :nextjournal/opts {:id \"emmy.differential/collect-terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/collect-terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- terms:map-coefficients\\n  \\\"Given some function `f` and a sequence of `terms`, returns a vector of terms\\n  with all each `c` mapped to `(f c)`. Any term where `(v/zero? (f c))` is true\\n  will be filtered out.\\\"\\n  [f terms]\\n  (let [xform (mapcat\\n               (fn [term]\\n                 (let [c' (f (coefficient term))]\\n                   (if (v/zero? c')\\n                     []\\n                     [(make-term (tags term) c')]))))]\\n    (into [] xform terms)))\", :nextjournal/opts {:id \"emmy.differential/terms:map-coefficients-code\", :loc {:line 501, :end-line 512, :column 1, :end-column 28}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$terms_COLON_map_coefficients 0x66cf913a \\\"emmy.differential$terms_COLON_map_coefficients@66cf913a\\\"]\", :nextjournal/opts {:id \"emmy.differential/terms:map-coefficients-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/terms:map-coefficients-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5duLfEc173qBcgBLYoPuAnhUixPbdN\"} [:p [:<> \"[[terms:*]] implements the first three steps, and calls [[collect-terms]] on\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the resulting sequence:\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5duLfEc173qBcgBLYoPuAnhUixPbdN\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn- t*ts\\n  \\\"Multiplies a single term on the left by a vector of `terms` on the right.\\n  Returns a new vector of terms.\\\"\\n  [[tags coeff] terms]\\n  (loop [acc []\\n         i 0]\\n    (let [t (nth terms i nil)]\\n      (if (nil? t)\\n        acc\\n\\t      (let [[tags1 coeff1] t]\\n\\t        (if (empty? (uv/intersection tags tags1))\\n\\t\\t        (recur (conj acc (make-term\\n\\t\\t                          (uv/union tags tags1)\\n\\t\\t                          (g/* coeff coeff1)))\\n\\t\\t               (inc i))\\n\\t\\t        (recur acc (inc i))))))))\", :nextjournal/opts {:id \"emmy.differential/t*ts-code\", :loc {:line 517, :end-line 532, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$t_STAR_ts 0x793673d \\\"emmy.differential$t_STAR_ts@793673d\\\"]\", :nextjournal/opts {:id \"emmy.differential/t*ts-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/t*ts-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn terms:*\\n  \\\"Returns a vector of non-zero [[Differential]] terms that represent the product\\n  of the differential term lists `xs` and `ys`.\\n\\n  NOTE that this function doesn't need to call [[collect-terms]] internally\\n  because grouping is accomplished by the internal [[terms:+]] calls.\\\"\\n  [xlist ylist]\\n  (letfn [(call [i]\\n            (let [x (nth xlist i nil)]\\n              (if (nil? x)\\n                []\\n                (terms:+ (t*ts x ylist)\\n\\t                       (call (inc i))))))]\\n    (call 0)))\", :nextjournal/opts {:id \"emmy.differential/terms:*-code\", :loc {:line 534, :end-line 547, :column 1, :end-column 15}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$terms_COLON__STAR_ 0x62d39e27 \\\"emmy.differential$terms_COLON__STAR_@62d39e27\\\"]\", :nextjournal/opts {:id \"emmy.differential/terms:*-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/terms:*-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drySL8j4SRZ4p7XQ6ukm3Q4StLSVg\"} [\"h2\" {:id \"differential-type-implementation\"} [:<> \"Differential Type Implementation\"]] [:p [:<> \"Armed with our term list arithmetic operations, we can finally implement\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"our [[Differential]] type and implement a number of important Clojure and\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"Emmy protocols.\"]] [:p [:<> \"A [[Differential]] will respond to [[v/kind]] with \"] [:code [:<> \"::differential\"]] [:<> \". Because\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"we want [[Differential]] instances to work in any place that real numbers or\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"symbolic argument work, let's make \"] [:code [:<> \"::differential\"]] [:<> \" derive from \"] [:code [:<> \"::v/scalar\"]] [:<> \":\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drySL8j4SRZ4p7XQ6ukm3Q4StLSVg\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(derive ::differential ::v/scalar)\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drXm6HS5Qsy5Wsvzx5GMfgSkF1xci-code\", :loc {:line 559, :end-line 559, :column 1, :end-column 35}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drXm6HS5Qsy5Wsvzx5GMfgSkF1xci-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dqzBz7T2SsrT5XcktmVKhcq4M2LHC\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drXm6HS5Qsy5Wsvzx5GMfgSkF1xci-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drXZykM3L7QHJ7yB2SgvhStuJaxPV\"} [:p [:<> \"Now the actual type. The \"] [:code [:<> \"terms\"]] [:<> \" field is a term-list vector that will\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"remain (contractually!) sorted by its list of tags.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drXZykM3L7QHJ7yB2SgvhStuJaxPV\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(declare compare equiv finite-term from-terms one?)\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drmE3uvL8njViJUwxCVNmqcs5FuFv-code\", :loc {:line 564, :end-line 564, :column 1, :end-column 52}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$equiv 0x7d4bd516 \\\"emmy.differential$equiv@7d4bd516\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drmE3uvL8njViJUwxCVNmqcs5FuFv-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drmE3uvL8njViJUwxCVNmqcs5FuFv-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(deftype Differential [terms]\\n  ;; A [[Differential]] as implemented can act as a chain-rule accounting device\\n  ;; for all sorts of types, not just numbers. A [[Differential]] is\\n  ;; only [[v/numerical?]] if its coefficients are numerical (or if `terms` is\\n  ;; empty, interpreted as a [[Differential]] equal to `0`.)\\n  v/Numerical\\n  (numerical? [_]\\n    (or (empty? terms)\\n        (v/numerical?\\n         (coefficient (nth terms 0)))))\\n\\n  IPerturbed\\n  (perturbed? [_] true)\\n\\n  ;; There are 3 cases to consider when replacing some tag in a term, annotated\\n  ;; below:\\n  (replace-tag [_ oldtag newtag]\\n    (letfn [(process [term]\\n              (let [tagv (tags term)]\\n                (if-not (uv/contains? tagv oldtag)\\n                  ;; if the term doesn't contain the old tag, ignore it.\\n                  [term]\\n                  (if (uv/contains? tagv newtag)\\n                    ;; if the term _already contains_ the new tag\\n                    ;; $\\\\varepsilon_{new}$, then replacing $\\\\varepsilon_1$\\n                    ;; with a new instance of $\\\\varepsilon_2$ would cause a\\n                    ;; clash. Since $\\\\varepsilon_2^2=0$, the term should be\\n                    ;; removed.\\n                    []\\n                    ;; else, perform the replacement.\\n                    [(make-term (-> tagv\\n                                    (uv/disj oldtag)\\n                                    (uv/conj newtag))\\n                                (coefficient term))]))))]\\n      (from-terms\\n       (mapcat process terms))))\\n\\n  ;; To extract the tangent (with respect to `tag`) from a differential, return\\n  ;; all terms that contain the tag (with the tag removed!) This can create\\n  ;; duplicate terms, so use [[from-terms]] to massage the result into\\n  ;; well-formedness again.\\n  (extract-tangent [_ tag]\\n    (from-terms\\n     (mapcat (fn [term]\\n               (let [tagv (tags term)]\\n                 (if (uv/contains? tagv tag)\\n                   [(make-term (uv/disj tagv tag)\\n                               (coefficient term))]\\n                   [])))\\n             terms)))\\n\\n  v/Value\\n  (zero? [_]\\n    (every? (comp v/zero? coefficient) terms))\\n  (one? [this] (one? this))\\n  (identity? [this] (one? this))\\n  (zero-like [_] 0)\\n  (one-like [_] 1)\\n  (identity-like [_] 1)\\n  (freeze [_]\\n    (letfn [(freeze-term [term]\\n              (make-term (tags term)\\n                         (v/freeze (coefficient term))))]\\n      `[~'Differential\\n        ~@(mapv freeze-term terms)]))\\n  (exact? [_] false)\\n  (kind [_] ::differential)\\n\\n  Object\\n  ;; Comparing [[Differential]] objects using `equals` defaults to [[equiv]],\\n  ;; which compares instances only using their non-tagged ('finite') components.\\n  ;; If you want to compare two instances using their full term lists,\\n  ;; See [[eq]].\\n  #?(:clj (equals [a b] (equiv a b)))\\n  #?(:cljs (valueOf [this] (.valueOf (finite-term this))))\\n  (toString [_]\\n    (let [term-strs (map (fn [term]\\n                           (str (tags term)\\n                                \\\" → \\\"\\n                                (pr-str (coefficient term))))\\n                         terms)]\\n      (str \\\"D[\\\" (join \\\" \\\" term-strs) \\\"]\\\")))\\n\\n  #?@(:clj\\n      ;; This one is slightly subtle. To participate in control flow operations,\\n      ;; like comparison with both [[Differential]] and non-[[Differential]]\\n      ;; numbers, [[Differential]] instances should compare using ONLY their\\n      ;; non-tagged (\\\"finite\\\") terms. This means that comparison will totally\\n      ;; ignore any difference in tags.\\n      [Comparable\\n       (compareTo [a b] (compare a b))]\\n\\n      :cljs\\n      [IEquiv\\n       (-equiv [a b] (equiv a b))\\n\\n       IComparable\\n       (-compare [a b]  (compare a b))\\n\\n       IPrintWithWriter\\n       (-pr-writer [x writer _]\\n                   (write-all writer (.toString x)))]))\", :nextjournal/opts {:id \"emmy.differential/->Differential-code\", :loc {:line 566, :end-line 667, :column 1, :end-column 56}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$eval61550$__GT_Differential__61561 0x6797cdc4 \\\"emmy.differential$eval61550$__GT_Differential__61561@6797cdc4\\\"]\", :nextjournal/opts {:id \"emmy.differential/->Differential-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsssNEhfmgUaTeqc4k77o3xKVno85\"}, :nextjournal/opts {:id \"emmy.differential/->Differential-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"#?(:clj\\n   (defmethod print-method Differential\\n     [^Differential s ^java.io.Writer w]\\n     (.write w (.toString s))))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsPeHQ4Df42ACZSBzykk4syi64W6y-code\", :loc {:line 669, :end-line 672, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x7ba1e484 \\\"clojure.lang.MultiFn@7ba1e484\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsPeHQ4Df42ACZSBzykk4syi64W6y-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsA7yy73JJWuRAwcGasPy98k4FidD\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsPeHQ4Df42ACZSBzykk4syi64W6y-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsGbVQvst1AKxoy9edMfykBLsQuHh\"} [\"h2\" {:id \"accessor-methods\"} [:<> \"Accessor Methods\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsGbVQvst1AKxoy9edMfykBLsQuHh\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn differential?\\n  \\\"Returns true if the supplied object is an instance of [[Differential]], false\\n  otherwise.\\\"\\n  [dx]\\n  (instance? Differential dx))\", :nextjournal/opts {:id \"emmy.differential/differential?-code\", :loc {:line 676, :end-line 680, :column 1, :end-column 31}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$differential_QMARK_ 0x57d7f71 \\\"emmy.differential$differential_QMARK_@57d7f71\\\"]\", :nextjournal/opts {:id \"emmy.differential/differential?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/differential?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- bare-terms\\n  \\\"Returns the `-terms` field of the supplied [[Differential]] object. Errors if\\n  any other type is supplied.\\\"\\n  [dx]\\n  {:pre [(differential? dx)]}\\n  (.-terms ^Differential dx))\", :nextjournal/opts {:id \"emmy.differential/bare-terms-code\", :loc {:line 682, :end-line 687, :column 1, :end-column 30}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$bare_terms 0x263df9ad \\\"emmy.differential$bare_terms@263df9ad\\\"]\", :nextjournal/opts {:id \"emmy.differential/bare-terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/bare-terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drtVjNikBR2kGyqKNx3sof3MY36wC\"} [\"h2\" {:id \"constructors\"} [:<> \"Constructors\"]] [:p [:<> \"Because a [[Differential]] is really a wrapper around the idea of a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"generalized dual number represented as a term-list, we need to be able to get\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"to and from the term list format from other types, not just [[Differential]]\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"instances.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drtVjNikBR2kGyqKNx3sof3MY36wC\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn- ->terms\\n  \\\"Returns a vector of terms that represent the supplied [[Differential]]; any\\n  term with a [[v/zero?]] coefficient will be filtered out before return.\\n\\n  If you pass a non-[[Differential]], [[->terms]] will return a singleton term\\n  list (or `[]` if the argument was zero).\\\"\\n  [dx]\\n  (cond (differential? dx) (bare-terms dx)\\n        (vector? dx)       dx\\n        (v/zero? dx)       []\\n        :else              [(make-term dx)]))\", :nextjournal/opts {:id \"emmy.differential/->terms-code\", :loc {:line 696, :end-line 706, :column 1, :end-column 46}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$__GT_terms 0x7f1df943 \\\"emmy.differential$__GT_terms@7f1df943\\\"]\", :nextjournal/opts {:id \"emmy.differential/->terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/->terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- terms->differential\\n  \\\"Returns a differential instance generated from a vector of terms. This method\\n  will do some mild cleanup, or canonicalization:\\n\\n  - any empty term list will return 0\\n  - a singleton term list with no tags will return its coefficient\\n\\n  NOTE this method assumes that the input is properly sorted, and contains no\\n  zero coefficients.\\\"\\n  [terms]\\n  {:pre [(vector? terms)]}\\n  (cond (empty? terms) 0\\n\\n        (and (= (count terms) 1)\\n             (empty? (tags (nth terms 0))))\\n        (coefficient (nth terms 0))\\n\\n        :else (->Differential terms)))\", :nextjournal/opts {:id \"emmy.differential/terms->differential-code\", :loc {:line 708, :end-line 725, :column 1, :end-column 39}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$terms__GT_differential 0xb6cb7e0 \\\"emmy.differential$terms__GT_differential@b6cb7e0\\\"]\", :nextjournal/opts {:id \"emmy.differential/terms->differential-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/terms->differential-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn from-terms\\n  \\\"Accepts a sequence of terms (i.e., pairs of `[tag-list, coefficient]`), and\\n  returns:\\n\\n  - a well-formed [[Differential]] instance, if the terms resolve to a\\n    differential with non-zero infinitesimal terms\\n  - the original input otherwise\\n\\n  Duplicate (by tag list) terms are allowed; their coefficients will be summed\\n  together and removed if they sum to zero.\\\"\\n  [tags->coefs]\\n  (terms->differential\\n   (collect-terms tags->coefs)))\", :nextjournal/opts {:id \"emmy.differential/from-terms-code\", :loc {:line 727, :end-line 739, :column 1, :end-column 33}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$from_terms 0x6504d70b \\\"emmy.differential$from_terms@6504d70b\\\"]\", :nextjournal/opts {:id \"emmy.differential/from-terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/from-terms-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn map-coefficients\\n  \\\"Given a function `f` and [[Differential]] instance `d`, returns a\\n  new [[Differential]] generated by transforming all coefficients `c` of `d`\\n  to `(f c)`.\\n\\n  Any term in the returned instance with a `v/zero?` coefficient\\n  will be filtered out.\\\"\\n  [f d]\\n  (let [terms (bare-terms d)]\\n    (->Differential\\n     (terms:map-coefficients f terms))))\", :nextjournal/opts {:id \"emmy.differential/map-coefficients-code\", :loc {:line 741, :end-line 751, :column 1, :end-column 41}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$map_coefficients 0x2cbdba97 \\\"emmy.differential$map_coefficients@2cbdba97\\\"]\", :nextjournal/opts {:id \"emmy.differential/map-coefficients-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/map-coefficients-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsRRu1aKWKySGbedaArXxGpGuyYgZ\"} [\"h2\" {:id \"differential-api\"} [:<> \"Differential API\"]] [:p [:<> \"These first two functions create a way to globally declare, via a dynamic\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"binding, the stack of tags that are currently in play. If three nested\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivatives are being taken, [[\"] [:em [:<> \"active-tags\"]] [:<> \"]] will contain three entries\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"from a perspective inside the function at the deepest level.\"]] [:p [:<> \"The [[IPerturbed]] implementation for functions uses this information to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"determine whether or not to use [[replace-tag]] to protect its tag from\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"perturbation confusion. If some higher level is not trying to extract the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"same tag, there's no need.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsRRu1aKWKySGbedaArXxGpGuyYgZ\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(def ^:dynamic *active-tags* [])\", :nextjournal/opts {:id \"emmy.differential/*active-tags*-code\", :loc {:line 765, :end-line 765, :column 1, :end-column 33}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [], :nextjournal/opts {:id \"emmy.differential/*active-tags*-result\"}, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsKpRYUuGnwVK3BPfAoiJqkhVbPzH\"}}, :nextjournal/blob-id \"5dr2whfWeVpFa6rmJw93YQ61necR1A\"}, :nextjournal/opts {:id \"emmy.differential/*active-tags*-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn with-active-tag\\n  \\\"Like `apply`, but conj-es `tag` onto the dynamic variable [[*active-tags*]]\\n  inside the scope of `f`.\\n\\n  Returns the result of applying `f` to `args`.\\\"\\n  [tag f args]\\n  (binding [*active-tags* (conj *active-tags* tag)]\\n    (apply f args)))\", :nextjournal/opts {:id \"emmy.differential/with-active-tag-code\", :loc {:line 767, :end-line 774, :column 1, :end-column 21}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$with_active_tag 0x3cfa89a2 \\\"emmy.differential$with_active_tag@3cfa89a2\\\"]\", :nextjournal/opts {:id \"emmy.differential/with-active-tag-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/with-active-tag-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn tag-active?\\n  \\\"Returns true if `tag` is an element of [[*active-tags*]] (and therefore pending\\n  for extraction by some nested derivative), false otherwise.\\\"\\n  [tag]\\n  (boolean\\n   (some #{tag} (rseq *active-tags*))))\", :nextjournal/opts {:id \"emmy.differential/tag-active?-code\", :loc {:line 776, :end-line 781, :column 1, :end-column 40}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$tag_active_QMARK_ 0x52c7fa6a \\\"emmy.differential$tag_active_QMARK_@52c7fa6a\\\"]\", :nextjournal/opts {:id \"emmy.differential/tag-active?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/tag-active?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drWfSG3iy93YR1QGP2jUnGRAxNeik\"} [\"h3\" {:id \"differential-arithmetic\"} [:<> \"Differential Arithmetic\"]] [:p [:<> \"This next section lifts slightly-augmented versions of [[terms:+]]\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"and [[terms:*]] up to operate on [[Differential]] instances. These work just\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"as before, but handle wrapping and unwrapping the term list.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drWfSG3iy93YR1QGP2jUnGRAxNeik\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn d:+\\n  \\\"Returns an object representing the sum of the two objects `dx` and `dy`. This\\n  works by summing the coefficients of all terms with the same list of tags.\\n\\n    Works with non-[[Differential]] instances on either or both sides, and returns\\n  a [[Differential]] only if it contains any non-zero tangent components.\\\"\\n  ([] 0)\\n  ([dx] dx)\\n  ([dx dy]\\n   (terms->differential\\n    (terms:+ (->terms dx)\\n             (->terms dy))))\\n  ([dx dy & more]\\n   (terms->differential\\n    (transduce (map ->terms)\\n               terms:+\\n               (cons dx (cons dy more))))))\", :nextjournal/opts {:id \"emmy.differential/d:+-code\", :loc {:line 789, :end-line 805, :column 1, :end-column 44}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$d_COLON__PLUS_ 0x1138c3b6 \\\"emmy.differential$d_COLON__PLUS_@1138c3b6\\\"]\", :nextjournal/opts {:id \"emmy.differential/d:+-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/d:+-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn d:*\\n  \\\"Returns an object representing the product of the two objects `dx` and `dy`.\\n\\n  This works by multiplying out all terms:\\n\\n  $$(dx1 + dx2 + dx3 + ...)(dy1 + dy2 + dy3...)$$\\n\\n  and then collecting any duplicate terms by summing their coefficients.\\n\\n  Works with non-[[Differential]] instances on either or both sides, and returns\\n  a [[Differential]] only if it contains any non-zero tangent components.\\\"\\n  ([] 1)\\n  ([dx] dx)\\n  ([dx dy]\\n   (terms->differential\\n    (terms:* (->terms dx)\\n             (->terms dy)))))\", :nextjournal/opts {:id \"emmy.differential/d:*-code\", :loc {:line 807, :end-line 823, :column 1, :end-column 30}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$d_COLON__STAR_ 0x5090aa04 \\\"emmy.differential$d_COLON__STAR_@5090aa04\\\"]\", :nextjournal/opts {:id \"emmy.differential/d:*-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/d:*-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn d:+*\\n  \\\"Identical to `(d:+ a) (d:* b c)`, but _slightly_ more efficient as the function\\n  is able to skip creating a [[Differential]] instance during [[d:*]] and then\\n  immediately tearing it down for [[d:+]].\\\"\\n  [a b c]\\n  (terms->differential\\n   (terms:+ (->terms a)\\n            (terms:* (->terms b)\\n                     (->terms c)))))\", :nextjournal/opts {:id \"emmy.differential/d:+*-code\", :loc {:line 825, :end-line 833, :column 1, :end-column 37}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$d_COLON__PLUS__STAR_ 0x384f9e2d \\\"emmy.differential$d_COLON__PLUS__STAR_@384f9e2d\\\"]\", :nextjournal/opts {:id \"emmy.differential/d:+*-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/d:+*-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drahtMSX58n71WbTdhPVciSzL4JwY\"} [:p [:<> \"Finally, the function we've been waiting for! [[bundle-element]] allows you\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"to augment some non-[[Differential]] thing with a tag and push it through the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"generic arithmetic system, where it will accumulate the derivative of your\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"original input (tagged with \"] [:code [:<> \"tag\"]] [:<> \".)\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drahtMSX58n71WbTdhPVciSzL4JwY\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn bundle-element\\n  \\\"Generate a new [[Differential]] object with the supplied `primal` and `tangent`\\n  components, and the supplied internal `tag` that this [[Differential]] will\\n  carry around to prevent perturbation confusion.\\n\\n  If the `tangent` component is `0`, acts as identity on `primal`. `tangent`\\n  defaults to 1.\\n\\n  `tag` defaults to a side-effecting call to [[fresh-tag]]; you can retrieve\\n  this unknown tag by calling [[max-order-tag]].\\\"\\n  ([primal]\\n   {:pre [(v/numerical? primal)]}\\n   (bundle-element primal 1 (fresh-tag)))\\n  ([primal tag]\\n   {:pre [(v/numerical? primal)]}\\n   (bundle-element primal 1 tag))\\n  ([primal tangent tag]\\n   (let [term (make-term (uv/make [tag]) 1)]\\n     (d:+* primal tangent [term]))))\", :nextjournal/opts {:id \"emmy.differential/bundle-element-code\", :loc {:line 840, :end-line 858, :column 1, :end-column 37}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$bundle_element 0x553637e4 \\\"emmy.differential$bundle_element@553637e4\\\"]\", :nextjournal/opts {:id \"emmy.differential/bundle-element-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/bundle-element-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsKb9ei6qPyd2apnL6onZ7RKJDHqc\"} [\"h2\" {:id \"differential-parts-api\"} [:<> \"Differential Parts API\"]] [:p [:<> \"These functions give higher-level access to the components of\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"a [[Differential]] you're typically interested in.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsKb9ei6qPyd2apnL6onZ7RKJDHqc\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn max-order-tag\\n  \\\"Given one or more well-formed [[Differential]] objects, returns the\\n  maximum ('highest order') tag found in the highest-order term of any of\\n  the [[Differential]] instances.\\n\\n  If there is NO maximal tag (i.e., if you provide [[Differential]] instances with\\n  no non-zero tangent parts, or all non-[[Differential]]s), returns nil.\\\"\\n  ([dx]\\n   (when (differential? dx)\\n     (let [last-term   (peek (bare-terms dx))\\n           highest-tag (peek (tags last-term))]\\n       highest-tag)))\\n  ([dx & dxs]\\n   (letfn [(max-termv [dx]\\n             (if-let [max-order (max-order-tag dx)]\\n               [max-order]\\n               []))]\\n     (when-let [orders (seq (mapcat max-termv (cons dx dxs)))]\\n       (apply max orders)))))\", :nextjournal/opts {:id \"emmy.differential/max-order-tag-code\", :loc {:line 865, :end-line 883, :column 1, :end-column 30}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$max_order_tag 0x2c47b87 \\\"emmy.differential$max_order_tag@2c47b87\\\"]\", :nextjournal/opts {:id \"emmy.differential/max-order-tag-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/max-order-tag-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5drbpWxgsjtYUcWgNTMn7G8QkE1HCf\"} [:p [:<> \"A reminder: the [[primal-part]] of a [[Differential]] is all terms except for\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"terms containing [[max-order-tag]], and [[tangent-part]] is\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"a [[Differential]] built out of the remaining terms, all of which contain\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"that tag.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5drbpWxgsjtYUcWgNTMn7G8QkE1HCf\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn primal-part\\n  \\\"Returns a [[Differential]] containing only the terms of `dx` that do NOT\\n  contain the supplied `tag`, i.e., the primal component of `dx` with respect to\\n  `tag`.\\n\\n  If no tag is supplied, defaults to `([[max-order-tag]] dx)`.\\n\\n  NOTE: every [[Differential]] can be factored into a dual number of the form\\n\\n      primal + (tangent * tag)\\n\\n  For each tag in any of its terms. [[primal-part]] returns this first piece,\\n  potentially simplified into a non-[[Differential]] if the primal part contains\\n  no other tags.\\\"\\n  ([dx] (primal-part dx (max-order-tag dx)))\\n  ([dx tag]\\n   (if (differential? dx)\\n     (let [sans-tag? #(not (tag-in-term? % tag))]\\n       (->> (bare-terms dx)\\n            (filterv sans-tag?)\\n            (terms->differential)))\\n     dx)))\", :nextjournal/opts {:id \"emmy.differential/primal-part-code\", :loc {:line 890, :end-line 911, :column 1, :end-column 11}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$primal_part 0x57513151 \\\"emmy.differential$primal_part@57513151\\\"]\", :nextjournal/opts {:id \"emmy.differential/primal-part-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/primal-part-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn tangent-part\\n  \\\"Returns a [[Differential]] containing only the terms of `dx` that contain the\\n  supplied `tag`, i.e., the tangent component of `dx` with respect to `tag`.\\n\\n  If no tag is supplied, defaults to `([[max-order-tag]] dx)`.\\n\\n  NOTE: Every [[Differential]] can be factored into a dual number of the form\\n\\n      primal + (tangent * tag)\\n\\n  For each tag in any of its terms. [[tangent-part]] returns a [[Differential]]\\n  representing `(tangent * tag)`, or 0 if `dx` contains no terms with the\\n  supplied `tag`.\\n\\n  NOTE: the 2-arity case is similar to `([[extract-tangent]] dx tag)`; the only\\n  difference is that [[extract-tangent]] drops the `dx` tag from all terms in\\n  the returned value. Call [[extract-tangent]] if you want to drop `tag`.\\\"\\n  ([dx] (tangent-part dx (max-order-tag dx)))\\n  ([dx tag]\\n   (if (differential? dx)\\n     (->> (bare-terms dx)\\n          (filterv #(tag-in-term? % tag))\\n          (terms->differential))\\n     0)))\", :nextjournal/opts {:id \"emmy.differential/tangent-part-code\", :loc {:line 913, :end-line 936, :column 1, :end-column 10}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$tangent_part 0x132b7360 \\\"emmy.differential$tangent_part@132b7360\\\"]\", :nextjournal/opts {:id \"emmy.differential/tangent-part-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/tangent-part-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn primal-tangent-pair\\n  \\\"Returns a pair of the primal and tangent components of the supplied `dx`, with\\n  respect to the supplied `tag`. See the docs for [[primal-part]]\\n  and [[tangent-part]] for more details.\\n\\n  [[primal-tangent-pair]] is equivalent to\\n\\n  `[([[primal-part]] dx tag) ([[tangent-part]] dx tag)]`\\n\\n  but slightly more efficient if you need both.\\\"\\n  ([dx] (primal-tangent-pair dx (max-order-tag dx)))\\n  ([dx tag]\\n   (if-not (differential? dx)\\n     [dx 0]\\n     (let [[tangent-terms primal-terms]\\n           (us/separatev #(tag-in-term? % tag)\\n                         (bare-terms dx))]\\n       [(terms->differential primal-terms)\\n        (terms->differential tangent-terms)]))))\", :nextjournal/opts {:id \"emmy.differential/primal-tangent-pair-code\", :loc {:line 938, :end-line 956, :column 1, :end-column 49}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$primal_tangent_pair 0x77c6fff6 \\\"emmy.differential$primal_tangent_pair@77c6fff6\\\"]\", :nextjournal/opts {:id \"emmy.differential/primal-tangent-pair-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/primal-tangent-pair-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn finite-term\\n  \\\"Returns the term of the supplied [[Differential]] `dx` that has no tags\\n  attached to it, `0` otherwise.\\n\\n  [[Differential]] instances with many can be decomposed many times\\n  into [[primal-part]] and [[tangent-part]]. Repeated calls\\n  to [[primal-part]] (with different tags!) will eventually yield a\\n  non-[[Differential]] value. If you know you want this, [[finite-term]] will\\n  get you there in one shot.\\n\\n  NOTE that this will only work with a well-formed [[Differential]], i.e., an\\n  instance with all terms sorted by their list of tags.\\\"\\n  [dx]\\n  (if (differential? dx)\\n    (let [[head] (bare-terms dx)\\n          ts     (tags head)]\\n      (if (empty? ts)\\n        (coefficient head)\\n        0))\\n    dx))\", :nextjournal/opts {:id \"emmy.differential/finite-term-code\", :loc {:line 958, :end-line 977, :column 1, :end-column 9}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$finite_term 0x56ffbaca \\\"emmy.differential$finite_term@56ffbaca\\\"]\", :nextjournal/opts {:id \"emmy.differential/finite-term-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/finite-term-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dtDG5b8pn6GQphZVFfmge5EM472TQ\"} [\"h2\" {:id \"comparison,-control-flow\"} [:<> \"Comparison, Control Flow\"]] [:p [:<> \"Functions like \"] [:code [:<> \"=\"]] [:<> \", \"] [:code [:<> \"<\"]] [:<> \" and friends don't have derivatives; instead, they're\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"used for control flow inside of Clojure functions. To play nicely with these\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"functions, the [[Differential]] API exposes a number of methods for comparing\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"numbers on ONLY their finite parts.\"]] [:p [:<> \"Why? If \"] [:code [:<> \"x\"]] [:<> \" is a [[Differential]] instance, \"] [:code [:<> \"(< x 10)\"]] [:<> \" needs to return true\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"whenever a non-[[Differential]] \"] [:code [:<> \"x\"]] [:<> \" would return true. To make this work,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"these operations look only at the [[finite-part]].\"]] [:p [:<> \"HOWEVER! [[v/one?]] and [[v/zero?]] are examples of Emmy functions that\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"are used to skip operations that we \"] [:em [:<> \"want\"]] [:<> \" to happen, like multiplication.\"]] [:p [:code [:<> \"(g/* x y)\"]] [:<> \" will return \"] [:code [:<> \"y\"]] [:<> \" if \"] [:code [:<> \"(v/one? x)\"]] [:<> \" is true... but to propagate the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"derivative through we need this multiplication to occur. The compromise is:\"]] [:ul [:li [:<> [:<> \"[[v/one?]] and [[v/zero?]] return true only when ALL [[tangent-part]]s are\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"zero and the [[finite-part]] is either [[v/one?]] or [[v/zero?]]\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"respectively\"]]] [:li [:<> [:<> \"[[eq]] and [[compare-full]] similarly looks at every component in\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the [[Differential]] supplied to both sides\"]]]] [:p [:<> \"while:\"]] [:ul [:li [:<> [:<> \"[[equiv]] and [[compare]] only examine the [[finite-part]] of either side.\"]]]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dtDG5b8pn6GQphZVFfmge5EM472TQ\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn one?\\n  \\\"Returns true if the supplied instance has a [[finite-part]] that responds true\\n  to [[emmy.value/one?]], and zero coefficients on any of its tangent\\n  components; false otherwise.\\n\\n  NOTE: This means that [[one?]] will not do what you expect as a conditional\\n  inside some function. If you want to branch inside some function you're taking\\n  the derivative of, prefer `(= 1 dx)`. This will only look at\\n  the [[finite-part]] and ignore the values of the tangent parts.\\\"\\n  [dx]\\n  (let [[p t] (primal-tangent-pair dx)]\\n    (and (v/one? p)\\n         (v/zero? t))))\", :nextjournal/opts {:id \"emmy.differential/one?-code\", :loc {:line 1006, :end-line 1018, :column 1, :end-column 24}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$one_QMARK_ 0x8fac2fd \\\"emmy.differential$one_QMARK_@8fac2fd\\\"]\", :nextjournal/opts {:id \"emmy.differential/one?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/one?-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn eq\\n  \\\"For non-differentials, this is identical to [[clojure.core/=]].\\n  For [[Differential]] instances, equality acts on tangent components too.\\n\\n  If you want to ignore the tangent components, use [[equiv]].\\\"\\n  ([_] true)\\n  ([a b]\\n   (v/= (->terms a)\\n        (->terms b)))\\n  ([a b & more]\\n   (if (eq a b)\\n     (if (next more)\\n       (recur b (first more) (next more))\\n       (eq b (first more)))\\n     false)))\", :nextjournal/opts {:id \"emmy.differential/eq-code\", :loc {:line 1020, :end-line 1034, :column 1, :end-column 14}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$eq 0x408200f1 \\\"emmy.differential$eq@408200f1\\\"]\", :nextjournal/opts {:id \"emmy.differential/eq-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/eq-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn compare-full\\n  \\\"Comparator that compares [[Differential]] instances with each other or\\n  non-differentials using all tangent terms each instance. Matches the response\\n  of [[eq]].\\n\\n  Acts as [[clojure.core/compare]] for non-differentials.\\\"\\n  [a b]\\n  (v/compare\\n   (->terms a)\\n   (->terms b)))\", :nextjournal/opts {:id \"emmy.differential/compare-full-code\", :loc {:line 1036, :end-line 1045, :column 1, :end-column 17}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$compare_full 0x7b6e58 \\\"emmy.differential$compare_full@7b6e58\\\"]\", :nextjournal/opts {:id \"emmy.differential/compare-full-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/compare-full-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn equiv\\n  \\\"Returns true if all of the supplied objects have equal [[finite-part]]s, false\\n  otherwise.\\n\\n  Use [[equiv]] if you want to compare non-differentials with\\n  [[Differential]]s and ignore all tangent components. If you _do_ want to take\\n  the tangent components into account, prefer [[eq]].\\\"\\n  ([_] true)\\n  ([a b]\\n   (v/= (finite-term a)\\n        (finite-term b)))\\n  ([a b & more]\\n   (if (equiv a b)\\n     (if (next more)\\n       (recur b (first more) (next more))\\n       (equiv b (first more)))\\n     false)))\", :nextjournal/opts {:id \"emmy.differential/equiv-code\", :loc {:line 1047, :end-line 1063, :column 1, :end-column 14}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$equiv 0x7d4bd516 \\\"emmy.differential$equiv@7d4bd516\\\"]\", :nextjournal/opts {:id \"emmy.differential/equiv-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/equiv-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn compare\\n  \\\"Comparator that compares [[Differential]] instances with each other or\\n  non-differentials using only the [[finite-part]] of each instance. Matches the\\n  response of [[equiv]].\\n\\n  Acts as [[clojure.core/compare]] for non-differentials.\\\"\\n  [a b]\\n  (v/compare\\n   (finite-term a)\\n   (finite-term b)))\", :nextjournal/opts {:id \"emmy.differential/compare-code\", :loc {:line 1065, :end-line 1074, :column 1, :end-column 21}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$compare 0x2b79ad77 \\\"emmy.differential$compare@2b79ad77\\\"]\", :nextjournal/opts {:id \"emmy.differential/compare-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/compare-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5duMG5nagEhdsgqbuuDkVAM8U89AfE\"} [\"h2\" {:id \"chain-rule-and-lifted-functions\"} [:<> \"Chain Rule and Lifted Functions\"]] [:p [:<> \"Finally, we come to the heart of it! [[lift-1]] and [[lift-2]] \\\"lift\\\", or\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"augment, unary or binary functions with the ability to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"handle [[Differential]] instances in addition to whatever other types they\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"previously supported.\"]] [:p [:<> \"These functions are implementations of the single and multivariable Taylor\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"series expansion methods discussed at the beginning of the namespace.\"]] [:p [:<> \"There is yet another subtlety here, noted in the docstrings below. [[lift-1]]\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"and [[lift-2]] really are able to lift functions like [[clojure.core/+]] that\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"can't accept [[Differential]]s. But the first-order derivatives that you have\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"to supply \"] [:em [:<> \"do\"]] [:<> \" have to be able to take [[Differential]] instances.\"]] [:p [:<> \"This is because the [[tangent-part]] of [[Differential]] might still be\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"a [[Differential]], and for \"] [:code [:<> \"Df\"]] [:<> \" to handle this we need to be able to take\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the second-order derivative.\"]] [:p [:<> \"Magically this will all Just Work if you pass an already-lifted function, or\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"a function built out of already-lifted components, as \"] [:code [:<> \"df:dx\"]] [:<> \" or \"] [:code [:<> \"df:dy\"]] [:<> \".\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5duMG5nagEhdsgqbuuDkVAM8U89AfE\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defn lift-1\\n  \\\"Given:\\n\\n  - some unary function `f`\\n  - a function `df:dx` that computes the derivative of `f` with respect to its\\n    single argument\\n\\n  Returns a new unary function that operates on both the original type of `f`\\n  and [[Differential]] instances.\\n\\n  If called without `df:dx`, `df:dx` defaults to `(f :dfdx)`; this will return\\n  the derivative registered to a generic function defined with [[g/defgeneric]].\\n\\n  NOTE: `df:dx` has to ALREADY be able to handle [[Differential]] instances. The\\n  best way to accomplish this is by building `df:dx` out of already-lifted\\n  functions, and declaring them by forward reference if you need to.\\\"\\n  ([f]\\n   (if-let [df:dx (f :dfdx)]\\n     (lift-1 f df:dx)\\n     (u/illegal \\\"No df:dx supplied for `f` or registered generically.\\\")))\\n  ([f df:dx]\\n   (fn call [x]\\n     (if-not (differential? x)\\n       (f x)\\n       (let [[px tx] (primal-tangent-pair x)\\n             fx      (call px)]\\n         (if (v/numeric-zero? tx)\\n           fx\\n           (d:+* fx (df:dx px) tx)))))))\", :nextjournal/opts {:id \"emmy.differential/lift-1-code\", :loc {:line 1098, :end-line 1126, :column 1, :end-column 41}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$lift_1 0x754a6fcf \\\"emmy.differential$lift_1@754a6fcf\\\"]\", :nextjournal/opts {:id \"emmy.differential/lift-1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/lift-1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn lift-2\\n  \\\"Given:\\n\\n  - some binary function `f`\\n  - a function `df:dx` that computes the derivative of `f` with respect to its\\n    single argument\\n  - a function `df:dy`, similar to `df:dx` for the second arg\\n\\n  Returns a new binary function that operates on both the original type of `f`\\n  and [[Differential]] instances.\\n\\n  NOTE: `df:dx` and `df:dy` have to ALREADY be able to handle [[Differential]]\\n  instances. The best way to accomplish this is by building `df:dx` and `df:dy`\\n  out of already-lifted functions, and declaring them by forward reference if\\n  you need to.\\\"\\n  ([f]\\n   (let [df:dx (f :dfdx)\\n         df:dy (f :dfdy)]\\n     (if (and df:dx df:dy)\\n       (lift-2 f df:dx df:dy)\\n       (u/illegal \\\"No df:dx, df:dy supplied for `f` or registered generically.\\\"))))\\n  ([f df:dx df:dy]\\n   (fn call [x y]\\n     (if-not (or (differential? x)\\n                 (differential? y))\\n       (f x y)\\n       (let [tag     (max-order-tag x y)\\n             [xe dx] (primal-tangent-pair x tag)\\n             [ye dy] (primal-tangent-pair y tag)\\n             a (call xe ye)\\n             b (if (v/numeric-zero? dx)\\n                 a\\n                 (d:+* a (df:dx xe ye) dx))]\\n         (if (v/numeric-zero? dy)\\n           b\\n           (d:+* b (df:dy xe ye) dy)))))))\", :nextjournal/opts {:id \"emmy.differential/lift-2-code\", :loc {:line 1128, :end-line 1163, :column 1, :end-column 43}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$lift_2 0x251f7c1f \\\"emmy.differential$lift_2@251f7c1f\\\"]\", :nextjournal/opts {:id \"emmy.differential/lift-2-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/lift-2-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn lift-n\\n  \\\"Given:\\n\\n  - some function `f` that can handle 0, 1 or 2 arguments\\n  - `df:dx`, a fn that returns the derivative wrt the single arg in the unary case\\n  - `df:dx1` and `df:dx2`, fns that return the derivative with respect to the\\n    first and second args in the binary case\\n\\n  Returns a new any-arity function that operates on both the original type of\\n  `f` and [[Differential]] instances.\\n\\n  NOTE: The n-ary case of `f` is populated by nested calls to the binary case.\\n  That means that this is NOT an appropriate lifting method for an n-ary\\n  function that isn't built out of associative binary calls. If you need this\\n  ability, please file an issue at the [emmy issue\\n  tracker](https://github.com/mentat-collective/emmy/issues).\\\"\\n  [f df:dx df:dx1 df:dx2]\\n  (let [f1 (lift-1 f df:dx)\\n        f2 (lift-2 f df:dx1 df:dx2)]\\n    (fn call\\n      ([] (f))\\n      ([x] (f1 x))\\n      ([x y] (f2 x y))\\n      ([x y & more]\\n       (reduce call (call x y) more)))))\", :nextjournal/opts {:id \"emmy.differential/lift-n-code\", :loc {:line 1165, :end-line 1189, :column 1, :end-column 41}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$lift_n 0x7ecddf4a \\\"emmy.differential$lift_n@7ecddf4a\\\"]\", :nextjournal/opts {:id \"emmy.differential/lift-n-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/lift-n-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dsSVJF4SZcfKjYZf5aZZjz3HqMygh\"} [\"h2\" {:id \"generic-method-installation\"} [:<> \"Generic Method Installation\"]] [:p [:<> \"Armed with [[lift-1]] and [[lift-2]], we can install [[Differential]] into\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the Emmy generic arithmetic system.\"]] [:p [:<> \"Any function built out of these components will work with\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"the [[emmy.calculus.derivative/D]] operator.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dsSVJF4SZcfKjYZf5aZZjz3HqMygh\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defmethod g/simplify [::differential] [d]\\n  (map-coefficients g/simplify d))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsFpWLexojd3FsEoEghwoVvJUehdK-code\", :loc {:line 1199, :end-line 1200, :column 1, :end-column 35}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x1839c7f1 \\\"clojure.lang.MultiFn@1839c7f1\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsFpWLexojd3FsEoEghwoVvJUehdK-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsMVcPQJ5DdE1mGEngtbPPbPJbpi9\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsFpWLexojd3FsEoEghwoVvJUehdK-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- defunary\\n  \\\"Given:\\n\\n  - a generic unary multimethod `generic-op`\\n  - a corresponding single-arity lifted function `differential-op`\\n\\n  installs an appropriate unary implementation of `generic-op` for\\n  `::differential` instances.\\\"\\n  [generic-op differential-op]\\n  (defmethod generic-op [::differential] [a] (differential-op a)))\", :nextjournal/opts {:id \"emmy.differential/defunary-code\", :loc {:line 1202, :end-line 1211, :column 1, :end-column 67}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$defunary 0x3eabe72e \\\"emmy.differential$defunary@3eabe72e\\\"]\", :nextjournal/opts {:id \"emmy.differential/defunary-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/defunary-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- defbinary\\n  \\\"Given:\\n\\n  - a generic binary multimethod `generic-op`\\n  - a corresponding 2-arity lifted function `differential-op`\\n\\n  installs an appropriate binary implementation of `generic-op` between\\n  `:differential` and `::v/scalar` instances.\\\"\\n  [generic-op differential-op]\\n  (doseq [signature [[::differential ::differential]\\n                     [::v/scalar ::differential]\\n                     [::differential ::v/scalar]]]\\n    (defmethod generic-op signature [a b] (differential-op a b))))\", :nextjournal/opts {:id \"emmy.differential/defbinary-code\", :loc {:line 1213, :end-line 1225, :column 1, :end-column 67}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$defbinary 0x608a8b60 \\\"emmy.differential$defbinary@608a8b60\\\"]\", :nextjournal/opts {:id \"emmy.differential/defbinary-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/defbinary-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"emmy.differential/markdown-5dqyTkW5xdoUPsDm95SJoFEXRnzDkm\"} [:p [:<> \"And now we're off to the races. The rest of the namespace\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"provides [[defunary]] and [[defbinary]] calls for all of the generic\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"operations for which we know how to declare partial derivatives.\"]] [:p [:<> \"First, install \"] [:code [:<> \"equiv\"]] [:<> \" as to perform proper equality between \"] [:code [:<> \"Differential\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"instances and scalars. \"] [:code [:<> \"equiv\"]] [:<> \" compares on only the finite part, not the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5du5eveS8XMqMDMYH5rpQ1bqryEJdg\"}}] [:<> \"differential parts.\"]]], :nextjournal/opts {:id \"emmy.differential/markdown-5dqyTkW5xdoUPsDm95SJoFEXRnzDkm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-with-react-key, :hash \"5drtFhRgc8WMLrXw6DB4bZLsNZjHHp\"}} {:path [], :nextjournal/value \"(defbinary v/= equiv)\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drEPJZZFCT2bcoJufEV6SrWSA5ny5-code\", :loc {:line 1235, :end-line 1235, :column 1, :end-column 22}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drEPJZZFCT2bcoJufEV6SrWSA5ny5-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5du7ruoBj7g65isiLG1764ddcw2Wz1\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drEPJZZFCT2bcoJufEV6SrWSA5ny5-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defbinary g/add d:+)\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtu1caPkFYGxHSSr1Ej2Qg4CL4u82-code\", :loc {:line 1237, :end-line 1237, :column 1, :end-column 22}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtu1caPkFYGxHSSr1Ej2Qg4CL4u82-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5duG1Xj4oENUox4YYJfbQmWRE2Y71Z\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtu1caPkFYGxHSSr1Ej2Qg4CL4u82-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/negate (lift-1 g/negate))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dri9PvJjEbaPXGdotMjoHhi4pRAU1-code\", :loc {:line 1238, :end-line 1238, :column 1, :end-column 38}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x702d3fb4 \\\"clojure.lang.MultiFn@702d3fb4\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dri9PvJjEbaPXGdotMjoHhi4pRAU1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dtTsR4ma5dvdx2J4weY3yMYPJ85KL\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dri9PvJjEbaPXGdotMjoHhi4pRAU1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defbinary g/sub (lift-2 g/sub))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtmBYWDjXZqdPiXuHrky6MXjx7BS2-code\", :loc {:line 1239, :end-line 1239, :column 1, :end-column 33}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtmBYWDjXZqdPiXuHrky6MXjx7BS2-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5drXGqPKyiHv7JPdpi2HBwjKesxF1t\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtmBYWDjXZqdPiXuHrky6MXjx7BS2-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(let [mul  (lift-2 g/mul)]\\n  (defbinary g/mul mul)\\n  (defbinary g/dot-product mul))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsRtofQbVz4Xr7FMjjwjZwtMi9nab-code\", :loc {:line 1241, :end-line 1243, :column 1, :end-column 33}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsRtofQbVz4Xr7FMjjwjZwtMi9nab-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dt9AoMB5Xi7kJiB668pQidgVJ6LSp\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsRtofQbVz4Xr7FMjjwjZwtMi9nab-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defbinary g/expt (lift-2 g/expt))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr6GSALgv7rAH1akneccpHMaQgAPm-code\", :loc {:line 1244, :end-line 1244, :column 1, :end-column 35}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr6GSALgv7rAH1akneccpHMaQgAPm-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5drv27hpRzf4VG7AJEEV9CoFuNNxnx\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr6GSALgv7rAH1akneccpHMaQgAPm-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/square (lift-1 g/square))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtx1EzQqcrwVUw9Hct7MSDrpYE1eE-code\", :loc {:line 1246, :end-line 1246, :column 1, :end-column 38}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x26fd680f \\\"clojure.lang.MultiFn@26fd680f\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtx1EzQqcrwVUw9Hct7MSDrpYE1eE-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5ds2UAHeru599XQ9Jgsdhg5MB4fMX1\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtx1EzQqcrwVUw9Hct7MSDrpYE1eE-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/cube (lift-1 g/cube))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drZRyVebcZySM6CeXh3VpWNGP4EYc-code\", :loc {:line 1247, :end-line 1247, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x478e6969 \\\"clojure.lang.MultiFn@478e6969\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drZRyVebcZySM6CeXh3VpWNGP4EYc-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dseYfcWfpYYx1zkp2Wnb9mdPjNFXh\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drZRyVebcZySM6CeXh3VpWNGP4EYc-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/invert (lift-1 g/invert))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds2eU7qTxjTKtgbUbC4Z2mx35QqsK-code\", :loc {:line 1249, :end-line 1249, :column 1, :end-column 38}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x736b2b73 \\\"clojure.lang.MultiFn@736b2b73\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds2eU7qTxjTKtgbUbC4Z2mx35QqsK-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drYXL7Poe6mAF4RfbYnW6yPKWnUqu\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds2eU7qTxjTKtgbUbC4Z2mx35QqsK-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defbinary g/div (lift-2 g/div))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dthzJjLS65gYV3pTTJpRAgWP3djWW-code\", :loc {:line 1250, :end-line 1250, :column 1, :end-column 33}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dthzJjLS65gYV3pTTJpRAgWP3djWW-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dsiXHvjvhx1ym3PqhqXnZ1C2mMrsk\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dthzJjLS65gYV3pTTJpRAgWP3djWW-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/negative?\\n  (comp g/negative? finite-term))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5du1PDRWRrwuJJaJ71FkN2Z6H487aT-code\", :loc {:line 1252, :end-line 1253, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x6a227a35 \\\"clojure.lang.MultiFn@6a227a35\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5du1PDRWRrwuJJaJ71FkN2Z6H487aT-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsBMbTLwCGxkyaR9kWEC4WJYPSCzT\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5du1PDRWRrwuJJaJ71FkN2Z6H487aT-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/infinite?\\n  (comp g/infinite? finite-term))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drFN7QM8XVhSzi2Lg6Y6ASFLhxhM6-code\", :loc {:line 1255, :end-line 1256, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x2752da6e \\\"clojure.lang.MultiFn@2752da6e\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drFN7QM8XVhSzi2Lg6Y6ASFLhxhM6-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dtF6wEQ6L8duCmFGSB4EWG4Z47Smn\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drFN7QM8XVhSzi2Lg6Y6ASFLhxhM6-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/abs\\n  (fn [x]\\n    (let [f (finite-term x)\\n          func (cond (< f 0) (lift-1 g/negate)\\n                     (> f 0) (lift-1 identity (fn [_] 1))\\n                     (= f 0) (u/illegal \\\"Derivative of g/abs undefined at zero\\\")\\n                     :else (u/illegal (str \\\"error! derivative of g/abs at\\\" x)))]\\n      (func x))))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsajsRXHKJSwESwXeQDJwQSx2j1vX-code\", :loc {:line 1258, :end-line 1265, :column 1, :end-column 18}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x13232acc \\\"clojure.lang.MultiFn@13232acc\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsajsRXHKJSwESwXeQDJwQSx2j1vX-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drADGQcYsHB2kp9HskM7wfpNuAiNQ\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsajsRXHKJSwESwXeQDJwQSx2j1vX-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defn- discont-at-integers [f dfdx]\\n  (let [f (lift-1 f (fn [_] dfdx))\\n        name (v/freeze f)]\\n    (fn [x]\\n      (if (v/integral? (finite-term x))\\n        (u/illegal\\n         (str \\\"Derivative of g/\\\" name \\\" undefined at integral points.\\\"))\\n        (f x)))))\", :nextjournal/opts {:id \"emmy.differential/discont-at-integers-code\", :loc {:line 1267, :end-line 1274, :column 1, :end-column 18}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[emmy.differential$discont_at_integers 0x39b9ab68 \\\"emmy.differential$discont_at_integers@39b9ab68\\\"]\", :nextjournal/opts {:id \"emmy.differential/discont-at-integers-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"emmy.differential/discont-at-integers-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/floor\\n  (discont-at-integers g/floor 0))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drhasYpnZS58r8BipDrL41Pot8wHB-code\", :loc {:line 1276, :end-line 1277, :column 1, :end-column 35}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x40339db8 \\\"clojure.lang.MultiFn@40339db8\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drhasYpnZS58r8BipDrL41Pot8wHB-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsdFTtHQ9y8gTnhtekgw1mLXttFeG\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drhasYpnZS58r8BipDrL41Pot8wHB-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/ceiling\\n  (discont-at-integers g/ceiling 0))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtPYmsmc846bey15onw5t63JahTSc-code\", :loc {:line 1279, :end-line 1280, :column 1, :end-column 37}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x7183ae7a \\\"clojure.lang.MultiFn@7183ae7a\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtPYmsmc846bey15onw5t63JahTSc-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drHzPp7wG49ovqW64H9REDgwEtPqh\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtPYmsmc846bey15onw5t63JahTSc-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/integer-part\\n  (discont-at-integers g/integer-part 0))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtHdY6YBNvmq15fy5XjCsdNGnUzuw-code\", :loc {:line 1282, :end-line 1283, :column 1, :end-column 42}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x7bfc8fcc \\\"clojure.lang.MultiFn@7bfc8fcc\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtHdY6YBNvmq15fy5XjCsdNGnUzuw-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drQrusXMt5w8T41DeJfXEANZpW4vR\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtHdY6YBNvmq15fy5XjCsdNGnUzuw-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/fractional-part\\n  (discont-at-integers g/fractional-part 1))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dqre34AMM1t9GiM1KqpUjBfYREEKS-code\", :loc {:line 1285, :end-line 1286, :column 1, :end-column 45}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0xf6a9930 \\\"clojure.lang.MultiFn@f6a9930\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dqre34AMM1t9GiM1KqpUjBfYREEKS-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dqzkDEosSGY7wajNehm2V7YJKKkRA\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dqre34AMM1t9GiM1KqpUjBfYREEKS-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(let [div (lift-2 g/div)]\\n  (defbinary g/solve-linear (fn [l r] (div r l)))\\n  (defbinary g/solve-linear-right div))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drT7Pevc881pVHJFr65x2RHUBZFAZ-code\", :loc {:line 1288, :end-line 1290, :column 1, :end-column 40}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drT7Pevc881pVHJFr65x2RHUBZFAZ-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dtwTT8atNkeJFNDvButXJc9z7zMgr\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drT7Pevc881pVHJFr65x2RHUBZFAZ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/sqrt (lift-1 g/sqrt))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dszwPFMgWi3Pj5CmYnVqsruNkoLe1-code\", :loc {:line 1292, :end-line 1292, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x53e80b38 \\\"clojure.lang.MultiFn@53e80b38\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dszwPFMgWi3Pj5CmYnVqsruNkoLe1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drC7tUMHxdzhCxtkz9wbg1GpncP8i\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dszwPFMgWi3Pj5CmYnVqsruNkoLe1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/log (lift-1 g/log))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drQUbHr7rL2jAEwxnrKab58sg8Enf-code\", :loc {:line 1293, :end-line 1293, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x3ff49f41 \\\"clojure.lang.MultiFn@3ff49f41\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drQUbHr7rL2jAEwxnrKab58sg8Enf-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsn5opATBde7dAQ19hPid8iZeNPK4\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drQUbHr7rL2jAEwxnrKab58sg8Enf-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/exp (lift-1 g/exp))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5du6NrwNW4dKBeKg8eDPPqDTBgk5TY-code\", :loc {:line 1294, :end-line 1294, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x2069f59c \\\"clojure.lang.MultiFn@2069f59c\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5du6NrwNW4dKBeKg8eDPPqDTBgk5TY-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsvS21qnRisQJ7NJmnNSPPd4CNGWy\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5du6NrwNW4dKBeKg8eDPPqDTBgk5TY-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/cos (lift-1 g/cos))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt9Q7pMUdTLk1UZALpBJfeQW6hCwj-code\", :loc {:line 1296, :end-line 1296, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x7b114bb8 \\\"clojure.lang.MultiFn@7b114bb8\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt9Q7pMUdTLk1UZALpBJfeQW6hCwj-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dtqyS9KWjKb2pfP6NL7XrQ8XNdTKU\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt9Q7pMUdTLk1UZALpBJfeQW6hCwj-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/sin (lift-1 g/sin))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtHAqVW6pCX7vpjaUx2Ls9rPma1Ww-code\", :loc {:line 1297, :end-line 1297, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x68332e29 \\\"clojure.lang.MultiFn@68332e29\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtHAqVW6pCX7vpjaUx2Ls9rPma1Ww-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsEXhtKgDBnioCczhVc6oH9JUhEYL\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtHAqVW6pCX7vpjaUx2Ls9rPma1Ww-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/tan (lift-1 g/tan))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtkveu48phc2Xp58jCdG28vd2YSy1-code\", :loc {:line 1298, :end-line 1298, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x73a6baf9 \\\"clojure.lang.MultiFn@73a6baf9\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtkveu48phc2Xp58jCdG28vd2YSy1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dte3cLNTa8JVUbc8QAk9dube6CWPv\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtkveu48phc2Xp58jCdG28vd2YSy1-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/cot (lift-1 g/cot))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtpbeNNXvexnZxXBd8efHKbasQHHd-code\", :loc {:line 1299, :end-line 1299, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x1c0c7404 \\\"clojure.lang.MultiFn@1c0c7404\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtpbeNNXvexnZxXBd8efHKbasQHHd-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dqqKxFT6C8YGGWWz6BkMirZ9tMmxU\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtpbeNNXvexnZxXBd8efHKbasQHHd-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/sec (lift-1 g/sec))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtbixQvb4m1BPXXVygFfHwULwv8MM-code\", :loc {:line 1300, :end-line 1300, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x6d31a0b6 \\\"clojure.lang.MultiFn@6d31a0b6\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtbixQvb4m1BPXXVygFfHwULwv8MM-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drAQVMGjVq687LQggJGbVspsMHJbY\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtbixQvb4m1BPXXVygFfHwULwv8MM-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/csc (lift-1 g/csc))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds1mYpCwMM5jTZF1hwNpL8nZbmS8k-code\", :loc {:line 1301, :end-line 1301, :column 1, :end-column 32}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x1c82995f \\\"clojure.lang.MultiFn@1c82995f\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds1mYpCwMM5jTZF1hwNpL8nZbmS8k-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dtS79mHbNXGvWtPAwM5AXK4H8RiVw\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds1mYpCwMM5jTZF1hwNpL8nZbmS8k-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/atan (lift-1 g/atan))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr9CAu8K1sXwHwACVeEuKhKPKfjmB-code\", :loc {:line 1303, :end-line 1303, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x5a359944 \\\"clojure.lang.MultiFn@5a359944\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr9CAu8K1sXwHwACVeEuKhKPKfjmB-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsYo7gkFUdJeAKfA77LEvt5TxNusX\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr9CAu8K1sXwHwACVeEuKhKPKfjmB-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defbinary g/atan (lift-2 g/atan))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5duA6xMiJY9aMPT5n3Yd1qTHzrrYBB-code\", :loc {:line 1304, :end-line 1304, :column 1, :end-column 35}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value nil, :nextjournal/opts {:id \"emmy.differential/anon-expr-5duA6xMiJY9aMPT5n3Yd1qTHzrrYBB-result\"}, :nextjournal/viewer {:render-fn #viewer-fn (fn [_] [:span.cmt-default.inspected-value \"nil\"]), :hash \"5dtUvzjkkSGDKH896hrVHyYFWTpQG6\"}}, :nextjournal/blob-id \"5dtEtHewXYgxrLkApdKffhcuk3m5m3\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5duA6xMiJY9aMPT5n3Yd1qTHzrrYBB-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/asin (lift-1 g/asin))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt49xG4Nsw7q8QLomvCRzTm9tAvMt-code\", :loc {:line 1305, :end-line 1305, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x25667a52 \\\"clojure.lang.MultiFn@25667a52\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt49xG4Nsw7q8QLomvCRzTm9tAvMt-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drANsF1eRhu9ztfXt2PDNw1J2y9xv\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt49xG4Nsw7q8QLomvCRzTm9tAvMt-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/acos (lift-1 g/acos))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5duAAag7Fd3iYKK41KzMdTNN2Ak4oT-code\", :loc {:line 1306, :end-line 1306, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x45325a58 \\\"clojure.lang.MultiFn@45325a58\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5duAAag7Fd3iYKK41KzMdTNN2Ak4oT-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drf4kCJwLpxUH8aMae6PMCpBzrUpp\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5duAAag7Fd3iYKK41KzMdTNN2Ak4oT-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/acot (lift-1 g/acot))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtQvXrud7K4aE1VZHZ3rVydYF5r7m-code\", :loc {:line 1307, :end-line 1307, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x4d727bc0 \\\"clojure.lang.MultiFn@4d727bc0\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtQvXrud7K4aE1VZHZ3rVydYF5r7m-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drRTLptTs7wJnkVPxXMaRPtrBH5D3\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtQvXrud7K4aE1VZHZ3rVydYF5r7m-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/asec (lift-1 g/asec))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds6vWe2F8Pq8144Dzz3UHWiUxXqrx-code\", :loc {:line 1308, :end-line 1308, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x3bfb3493 \\\"clojure.lang.MultiFn@3bfb3493\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds6vWe2F8Pq8144Dzz3UHWiUxXqrx-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dryMfje4DdjK1o2ab8HrYn2s1RmsJ\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5ds6vWe2F8Pq8144Dzz3UHWiUxXqrx-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/acsc (lift-1 g/acsc))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drRAXYzXytFtZ6XKj2pFMzYq8nLKw-code\", :loc {:line 1309, :end-line 1309, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x2d596d54 \\\"clojure.lang.MultiFn@2d596d54\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drRAXYzXytFtZ6XKj2pFMzYq8nLKw-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsxEUxiH45PU2p57YDuKTBkpSyDgf\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drRAXYzXytFtZ6XKj2pFMzYq8nLKw-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/cosh (lift-1 g/cosh))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtYvyeCn6zaeDMRMMZfxdaoD7swaE-code\", :loc {:line 1311, :end-line 1311, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x7a6e123d \\\"clojure.lang.MultiFn@7a6e123d\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtYvyeCn6zaeDMRMMZfxdaoD7swaE-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drxDuT4BGRuWyuVjj7RXwU8n4n8Cp\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtYvyeCn6zaeDMRMMZfxdaoD7swaE-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/sinh (lift-1 g/sinh))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsb1PezXYGtUVStCZbcufBcCxvvmy-code\", :loc {:line 1312, :end-line 1312, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x241cdacb \\\"clojure.lang.MultiFn@241cdacb\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsb1PezXYGtUVStCZbcufBcCxvvmy-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drfkLBiUPYEA5CBBSYwwAirxTbYLX\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsb1PezXYGtUVStCZbcufBcCxvvmy-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/tanh (lift-1 g/tanh))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsmX1qhiJi4k5ibqkTaT96CW3XiEQ-code\", :loc {:line 1313, :end-line 1313, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x46a12d77 \\\"clojure.lang.MultiFn@46a12d77\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsmX1qhiJi4k5ibqkTaT96CW3XiEQ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dteCTehvQzyhVuzjZeZpbv137QUZY\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsmX1qhiJi4k5ibqkTaT96CW3XiEQ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/sech (lift-1 g/sech))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5duJZBc9Bxqc5VPZ1QBB6cu4uYEgFd-code\", :loc {:line 1314, :end-line 1314, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x2074cb3a \\\"clojure.lang.MultiFn@2074cb3a\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5duJZBc9Bxqc5VPZ1QBB6cu4uYEgFd-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsCCUnMn7aKjHVmtqtV9bGUcdb3Xd\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5duJZBc9Bxqc5VPZ1QBB6cu4uYEgFd-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/coth (lift-1 g/coth))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drfcfLQ14pbdTnEttw9dVsvCqTXHK-code\", :loc {:line 1315, :end-line 1315, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x2a01caf3 \\\"clojure.lang.MultiFn@2a01caf3\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drfcfLQ14pbdTnEttw9dVsvCqTXHK-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dszBs9pb5BcUbiZUg64ztVy2hFp8M\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drfcfLQ14pbdTnEttw9dVsvCqTXHK-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/csch (lift-1 g/csch))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr5iLmzCSmBsWmN2BJHnK2bQ94kGq-code\", :loc {:line 1316, :end-line 1316, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x680997fa \\\"clojure.lang.MultiFn@680997fa\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr5iLmzCSmBsWmN2BJHnK2bQ94kGq-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drBXVcZDfvkvsYUNVftihxHJp1dDP\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dr5iLmzCSmBsWmN2BJHnK2bQ94kGq-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/acosh (lift-1 g/acosh))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtXt7eAAgHW1qQDsMkJWd4E9guDzn-code\", :loc {:line 1318, :end-line 1318, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x270cc519 \\\"clojure.lang.MultiFn@270cc519\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtXt7eAAgHW1qQDsMkJWd4E9guDzn-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5duGEwUe3AkPEKi51SaTETBtxjFFBn\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtXt7eAAgHW1qQDsMkJWd4E9guDzn-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/asinh (lift-1 g/asinh))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt4EDaJv7jpKhvw4PajqjZp8BmjT3-code\", :loc {:line 1319, :end-line 1319, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x21a7e7d9 \\\"clojure.lang.MultiFn@21a7e7d9\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt4EDaJv7jpKhvw4PajqjZp8BmjT3-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drKAJp1veiSch7eLxHgZPG8W4uuLv\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dt4EDaJv7jpKhvw4PajqjZp8BmjT3-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/atanh (lift-1 g/atanh))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtdoimmon5RU3Tpy2JdMAc8recipR-code\", :loc {:line 1320, :end-line 1320, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x555e74c \\\"clojure.lang.MultiFn@555e74c\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtdoimmon5RU3Tpy2JdMAc8recipR-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5drWcLUMD4g4QBgPs6huF83iBB16DV\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtdoimmon5RU3Tpy2JdMAc8recipR-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/acoth (lift-1 g/acoth))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtYFHisSVTeRhAw7vXPy3JyKRpXLh-code\", :loc {:line 1321, :end-line 1321, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x21c7065b \\\"clojure.lang.MultiFn@21c7065b\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtYFHisSVTeRhAw7vXPy3JyKRpXLh-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dskPZKAWZVz4fnrPx8eMpc6vnmGN8\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtYFHisSVTeRhAw7vXPy3JyKRpXLh-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/asech (lift-1 g/asech))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsDN9vFEVNJ26BA9tJZtvMuoMWM8Z-code\", :loc {:line 1322, :end-line 1322, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x60223b77 \\\"clojure.lang.MultiFn@60223b77\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsDN9vFEVNJ26BA9tJZtvMuoMWM8Z-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsrVmSb7JPG8g1CDmvxcAvQBdF3cK\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dsDN9vFEVNJ26BA9tJZtvMuoMWM8Z-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/acsch (lift-1 g/acsch))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtBikcZ634ACgUcJWZuaWBNnWd63f-code\", :loc {:line 1323, :end-line 1323, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x7ea58185 \\\"clojure.lang.MultiFn@7ea58185\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtBikcZ634ACgUcJWZuaWBNnWd63f-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dtcxofvNmi1XizVqY9JfVMh778M5C\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dtBikcZ634ACgUcJWZuaWBNnWd63f-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/sinc (lift-1 g/sinc))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5du1Wvy7qrHaLfdun5X92R835syiau-code\", :loc {:line 1325, :end-line 1325, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x54e0669a \\\"clojure.lang.MultiFn@54e0669a\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5du1Wvy7qrHaLfdun5X92R835syiau-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dszxbU6XZ9xAdaib6ULexSTPGDFwV\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5du1Wvy7qrHaLfdun5X92R835syiau-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/sinhc (lift-1 g/sinhc))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dryN69RQzmVvqjuyx9hCKaCu8GfDR-code\", :loc {:line 1326, :end-line 1326, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x4d8c4783 \\\"clojure.lang.MultiFn@4d8c4783\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dryN69RQzmVvqjuyx9hCKaCu8GfDR-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dqocwjx9zaADtrHMjdz1eS4fXzNcK\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dryN69RQzmVvqjuyx9hCKaCu8GfDR-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/tanc (lift-1 g/tanc))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dqyTZQEgpu2rgN9Zum9E1J8H4HJEJ-code\", :loc {:line 1327, :end-line 1327, :column 1, :end-column 34}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x3c0424c6 \\\"clojure.lang.MultiFn@3c0424c6\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5dqyTZQEgpu2rgN9Zum9E1J8H4HJEJ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dsBhzrQyAcAvxFvH8tpARsG8bdgBE\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5dqyTZQEgpu2rgN9Zum9E1J8H4HJEJ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(defunary g/tanhc (lift-1 g/tanhc))\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drktnPWq6X94Xp735SPdobNVYEkTy-code\", :loc {:line 1328, :end-line 1328, :column 1, :end-column 36}}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[clojure.lang.MultiFn 0x6eff336a \\\"clojure.lang.MultiFn@6eff336a\\\"]\", :nextjournal/opts {:id \"emmy.differential/anon-expr-5drktnPWq6X94Xp735SPdobNVYEkTy-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (read-string x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5driNqLjrByEWrhxqnAqaiYK9eiYCv\"}}, :nextjournal/blob-id \"5dtgvv7Wdco8Z5id6KpwK4yvDGoqXV\"}, :nextjournal/opts {:id \"emmy.differential/anon-expr-5drktnPWq6X94Xp735SPdobNVYEkTy-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}}], :css-class nil}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5duAFDxE4sCnRX71Wo6zeCpC9C3djE\"}}}, :browse? false, :git/url \"https://github.com/mentat-collective/emmy\", :paths [\"src/emmy/differential.cljc\" \"src/emmy/calculus/derivative.cljc\"], :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@4NdW4yYfmUzzw9xCkmyrJ75nH75d/viewer.js?immutable=true\"}, :current-path \"src/emmy/differential.cljc\", :bundle? false, :git/sha \"db25912c4adcef13431318d7c3563f125c8bbbd7\", :path->url {\"src/emmy/differential.cljc\" \"src/emmy/differential.html\", \"src/emmy/calculus/derivative.cljc\" \"src/emmy/calculus/derivative.html\"}, :expanded-paths [\"src/emmy/differential.cljc\" \"src/emmy/calculus/derivative.cljc\"], :watch-paths [\"src\" \"dev\"], :report-fn #object[nextjournal.clerk.builder$stdout_reporter 0x78761497 \"nextjournal.clerk.builder$stdout_reporter@78761497\"]}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
let opts = nextjournal.clerk.sci_env.read_string(state)
nextjournal.clerk.static_app.init(opts)
</script></body></html>
